"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sequelize":
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("sequelize");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/auth/register.ts */ \"(api)/./pages/api/auth/register.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_register_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZyZWdpc3RlciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYXV0aCUyRnJlZ2lzdGVyLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZWdlbi8/N2NmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2F1dGgvcmVnaXN0ZXIudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3JlZ2lzdGVyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9yZWdpc3RlclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/api-utils.ts":
/*!**************************!*\
  !*** ./lib/api-utils.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticate: () => (/* binding */ authenticate),\n/* harmony export */   handleError: () => (/* binding */ handleError),\n/* harmony export */   handleSuccess: () => (/* binding */ handleSuccess),\n/* harmony export */   requireVerifiedEmail: () => (/* binding */ requireVerifiedEmail)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _db_models__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db/models */ \"(api)/./lib/db/models/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_db_models__WEBPACK_IMPORTED_MODULE_1__]);\n_db_models__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Error handler function\nconst handleError = (res, error, statusCode = 500)=>{\n    console.error(\"API Error:\", error);\n    return res.status(statusCode).json({\n        success: false,\n        message: error.message || \"Server error\",\n        error:  true ? error : 0\n    });\n};\n// Success response function\nconst handleSuccess = (res, data, message = \"Success\", statusCode = 200)=>{\n    return res.status(statusCode).json({\n        success: true,\n        message,\n        data\n    });\n};\n// Authentication middleware\nconst authenticate = async (req, res)=>{\n    try {\n        // Get token from header\n        const authHeader = req.headers.authorization;\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return res.status(401).json({\n                success: false,\n                message: \"No token provided\"\n            });\n        }\n        const token = authHeader.split(\" \")[1];\n        // Verify token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET || \"your_jwt_secret_key_change_this_in_production\");\n        // Get user from database\n        const user = await _db_models__WEBPACK_IMPORTED_MODULE_1__.User.findByPk(decoded.id);\n        if (!user) {\n            return res.status(401).json({\n                success: false,\n                message: \"User not found\"\n            });\n        }\n        // Add user to request object\n        req.user = user;\n        return user;\n    } catch (error) {\n        return res.status(401).json({\n            success: false,\n            message: \"Invalid token\"\n        });\n    }\n};\n// Email verification middleware\nconst requireVerifiedEmail = async (req, res)=>{\n    const user = req.user;\n    if (!user.emailVerified) {\n        return res.status(403).json({\n            success: false,\n            message: \"Email verification required\"\n        });\n    }\n    return true;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpLXV0aWxzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDK0I7QUFDSTtBQVVuQyx5QkFBeUI7QUFDbEIsTUFBTUUsY0FBYyxDQUFDQyxLQUFzQkMsT0FBWUMsYUFBYSxHQUFHO0lBQzVFQyxRQUFRRixLQUFLLENBQUMsY0FBY0E7SUFFNUIsT0FBT0QsSUFBSUksTUFBTSxDQUFDRixZQUFZRyxJQUFJLENBQUM7UUFDakNDLFNBQVM7UUFDVEMsU0FBU04sTUFBTU0sT0FBTyxJQUFJO1FBQzFCTixPQUFPTyxLQUF5QixHQUFnQlAsUUFBUVEsQ0FBU0E7SUFDbkU7QUFDRixFQUFFO0FBRUYsNEJBQTRCO0FBQ3JCLE1BQU1DLGdCQUFnQixDQUFDVixLQUFzQlcsTUFBV0osVUFBVSxTQUFTLEVBQUVMLGFBQWEsR0FBRztJQUNsRyxPQUFPRixJQUFJSSxNQUFNLENBQUNGLFlBQVlHLElBQUksQ0FBQztRQUNqQ0MsU0FBUztRQUNUQztRQUNBSTtJQUNGO0FBQ0YsRUFBRTtBQUVGLDRCQUE0QjtBQUNyQixNQUFNQyxlQUFlLE9BQU9DLEtBQXFCYjtJQUN0RCxJQUFJO1FBQ0Ysd0JBQXdCO1FBQ3hCLE1BQU1jLGFBQWFELElBQUlFLE9BQU8sQ0FBQ0MsYUFBYTtRQUU1QyxJQUFJLENBQUNGLGNBQWMsQ0FBQ0EsV0FBV0csVUFBVSxDQUFDLFlBQVk7WUFDcEQsT0FBT2pCLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE1BQU1XLFFBQVFKLFdBQVdLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUV0QyxlQUFlO1FBQ2YsTUFBTUMsVUFBVXZCLDBEQUFVLENBQUNxQixPQUFPVixRQUFRYyxHQUFHLENBQUNDLFVBQVUsSUFBSTtRQUU1RCx5QkFBeUI7UUFDekIsTUFBTUMsT0FBTyxNQUFNMUIsNENBQUlBLENBQUMyQixRQUFRLENBQUNMLFFBQVFNLEVBQUU7UUFFM0MsSUFBSSxDQUFDRixNQUFNO1lBQ1QsT0FBT3hCLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLDZCQUE2QjtRQUM1Qk0sSUFBWVcsSUFBSSxHQUFHQTtRQUVwQixPQUFPQTtJQUNULEVBQUUsT0FBT3ZCLE9BQU87UUFDZCxPQUFPRCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLFNBQVM7UUFDWDtJQUNGO0FBQ0YsRUFBRTtBQUVGLGdDQUFnQztBQUN6QixNQUFNb0IsdUJBQXVCLE9BQU9kLEtBQXFCYjtJQUM5RCxNQUFNd0IsT0FBTyxJQUFhQSxJQUFJO0lBRTlCLElBQUksQ0FBQ0EsS0FBS0ksYUFBYSxFQUFFO1FBQ3ZCLE9BQU81QixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLFNBQVM7UUFDWDtJQUNGO0lBRUEsT0FBTztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlZ2VuLy4vbGliL2FwaS11dGlscy50cz83ZGE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuL2RiL21vZGVscyc7XG5cbi8vIERlZmluZSByZXNwb25zZSB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBBcGlSZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIGRhdGE/OiBhbnk7XG4gIGVycm9yPzogYW55O1xufVxuXG4vLyBFcnJvciBoYW5kbGVyIGZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaGFuZGxlRXJyb3IgPSAocmVzOiBOZXh0QXBpUmVzcG9uc2UsIGVycm9yOiBhbnksIHN0YXR1c0NvZGUgPSA1MDApID0+IHtcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKTtcbiAgXG4gIHJldHVybiByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ1NlcnZlciBlcnJvcicsXG4gICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3IgOiB1bmRlZmluZWRcbiAgfSk7XG59O1xuXG4vLyBTdWNjZXNzIHJlc3BvbnNlIGZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaGFuZGxlU3VjY2VzcyA9IChyZXM6IE5leHRBcGlSZXNwb25zZSwgZGF0YTogYW55LCBtZXNzYWdlID0gJ1N1Y2Nlc3MnLCBzdGF0dXNDb2RlID0gMjAwKSA9PiB7XG4gIHJldHVybiByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgbWVzc2FnZSxcbiAgICBkYXRhXG4gIH0pO1xufTtcblxuLy8gQXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuZXhwb3J0IGNvbnN0IGF1dGhlbnRpY2F0ZSA9IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xuICB0cnkge1xuICAgIC8vIEdldCB0b2tlbiBmcm9tIGhlYWRlclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICAgIFxuICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnTm8gdG9rZW4gcHJvdmlkZWQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XG4gICAgXG4gICAgLy8gVmVyaWZ5IHRva2VuXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ3lvdXJfand0X3NlY3JldF9rZXlfY2hhbmdlX3RoaXNfaW5fcHJvZHVjdGlvbicpIGFzIHsgaWQ6IHN0cmluZyB9O1xuICAgIFxuICAgIC8vIEdldCB1c2VyIGZyb20gZGF0YWJhc2VcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlQayhkZWNvZGVkLmlkKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHVzZXIgdG8gcmVxdWVzdCBvYmplY3RcbiAgICAocmVxIGFzIGFueSkudXNlciA9IHVzZXI7XG4gICAgXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4nXG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIEVtYWlsIHZlcmlmaWNhdGlvbiBtaWRkbGV3YXJlXG5leHBvcnQgY29uc3QgcmVxdWlyZVZlcmlmaWVkRW1haWwgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgY29uc3QgdXNlciA9IChyZXEgYXMgYW55KS51c2VyO1xuICBcbiAgaWYgKCF1c2VyLmVtYWlsVmVyaWZpZWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRW1haWwgdmVyaWZpY2F0aW9uIHJlcXVpcmVkJ1xuICAgIH0pO1xuICB9XG4gIFxuICByZXR1cm4gdHJ1ZTtcbn07Il0sIm5hbWVzIjpbImp3dCIsIlVzZXIiLCJoYW5kbGVFcnJvciIsInJlcyIsImVycm9yIiwic3RhdHVzQ29kZSIsImNvbnNvbGUiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJwcm9jZXNzIiwidW5kZWZpbmVkIiwiaGFuZGxlU3VjY2VzcyIsImRhdGEiLCJhdXRoZW50aWNhdGUiLCJyZXEiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwidG9rZW4iLCJzcGxpdCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlbnYiLCJKV1RfU0VDUkVUIiwidXNlciIsImZpbmRCeVBrIiwiaWQiLCJyZXF1aXJlVmVyaWZpZWRFbWFpbCIsImVtYWlsVmVyaWZpZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/api-utils.ts\n");

/***/ }),

/***/ "(api)/./lib/db/db.ts":
/*!**********************!*\
  !*** ./lib/db/db.ts ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initDb: () => (/* binding */ initDb),\n/* harmony export */   sequelize: () => (/* binding */ sequelize),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__]);\nsequelize__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Initialize Sequelize with environment variables\nlet sequelize;\n// Check if running on Vercel with Vercel Postgres\nif (process.env.POSTGRES_URL) {\n    console.log(\"Using Vercel Postgres connection\");\n    // Use the Vercel Postgres connection string\n    sequelize = new sequelize__WEBPACK_IMPORTED_MODULE_0__.Sequelize(process.env.POSTGRES_URL, {\n        dialect: \"postgres\",\n        logging:  true ? console.log : 0,\n        dialectOptions: {\n            ssl: {\n                require: true,\n                rejectUnauthorized: false\n            }\n        }\n    });\n} else {\n    // Use traditional connection parameters for local development\n    console.log(\"Using local PostgreSQL connection\");\n    sequelize = new sequelize__WEBPACK_IMPORTED_MODULE_0__.Sequelize(process.env.DB_NAME || \"invoicegen\", process.env.DB_USER || \"postgres\", process.env.DB_PASSWORD || \"postgres\", {\n        host: process.env.DB_HOST || \"localhost\",\n        port: parseInt(process.env.DB_PORT || \"5432\"),\n        dialect: \"postgres\",\n        logging:  true ? console.log : 0,\n        dialectOptions: {\n            ssl:  false ? 0 : false\n        }\n    });\n}\n// Test the connection with retry logic\nconst testConnection = async (retries = 5, delay = 5000)=>{\n    let currentTry = 0;\n    while(currentTry < retries){\n        try {\n            await sequelize.authenticate();\n            console.log(\"Database connection has been established successfully.\");\n            return true;\n        } catch (error) {\n            currentTry++;\n            console.error(`Unable to connect to the database (attempt ${currentTry}/${retries}):`, error);\n            if (currentTry >= retries) {\n                console.error(\"Maximum connection attempts reached. Database connection failed.\");\n                // In production, we might want to notify administrators\n                if (false) {}\n                return false;\n            }\n            // Wait before trying again\n            console.log(`Retrying in ${delay / 1000} seconds...`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    return false;\n};\n// Initialize database\nconst initDb = async ()=>{\n    try {\n        // First test the connection with retry logic\n        const connectionSuccessful = await testConnection();\n        // If connection failed, return false\n        if (!connectionSuccessful) {\n            console.error(\"Database connection failed after multiple retries\");\n            return false;\n        }\n        // Import models\n        __webpack_require__(/*! ./models/User */ \"(api)/./lib/db/models/User.ts\");\n        __webpack_require__(/*! ./models/Invoice */ \"(api)/./lib/db/models/Invoice.ts\");\n        // In production, we don't want to alter tables automatically\n        // This should be done through migrations\n        const syncOptions =  true ? {\n            alter: true\n        } : 0;\n        await sequelize.sync(syncOptions);\n        console.log(\"Database synchronized successfully.\");\n        return true;\n    } catch (error) {\n        console.error(\"Error synchronizing database:\", error);\n        // In production, we might want to notify administrators\n        if (false) {}\n        return false;\n    }\n};\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yi9kYi50cz8wN2E3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8vIEluaXRpYWxpemUgU2VxdWVsaXplIHdpdGggZW52aXJvbm1lbnQgdmFyaWFibGVzXG5sZXQgc2VxdWVsaXplOiBTZXF1ZWxpemU7XG5cbi8vIENoZWNrIGlmIHJ1bm5pbmcgb24gVmVyY2VsIHdpdGggVmVyY2VsIFBvc3RncmVzXG5pZiAocHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVJMKSB7XG4gIGNvbnNvbGUubG9nKCdVc2luZyBWZXJjZWwgUG9zdGdyZXMgY29ubmVjdGlvbicpO1xuICAvLyBVc2UgdGhlIFZlcmNlbCBQb3N0Z3JlcyBjb25uZWN0aW9uIHN0cmluZ1xuICBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKHByb2Nlc3MuZW52LlBPU1RHUkVTX1VSTCwge1xuICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgbG9nZ2luZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IGZhbHNlLFxuICAgIGRpYWxlY3RPcHRpb25zOiB7XG4gICAgICBzc2w6IHtcbiAgICAgICAgcmVxdWlyZTogdHJ1ZSxcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICAvLyBVc2UgdHJhZGl0aW9uYWwgY29ubmVjdGlvbiBwYXJhbWV0ZXJzIGZvciBsb2NhbCBkZXZlbG9wbWVudFxuICBjb25zb2xlLmxvZygnVXNpbmcgbG9jYWwgUG9zdGdyZVNRTCBjb25uZWN0aW9uJyk7XG4gIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoXG4gICAgcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCAnaW52b2ljZWdlbicsXG4gICAgcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncG9zdGdyZXMnLFxuICAgIHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdwb3N0Z3JlcycsXG4gICAge1xuICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgJzU0MzInKSxcbiAgICAgIGRpYWxlY3Q6ICdwb3N0Z3JlcycsXG4gICAgICBsb2dnaW5nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGNvbnNvbGUubG9nIDogZmFsc2UsXG4gICAgICBkaWFsZWN0T3B0aW9uczoge1xuICAgICAgICBzc2w6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyB7XG4gICAgICAgICAgcmVxdWlyZTogdHJ1ZSxcbiAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICAgIH0gOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuLy8gVGVzdCB0aGUgY29ubmVjdGlvbiB3aXRoIHJldHJ5IGxvZ2ljXG5jb25zdCB0ZXN0Q29ubmVjdGlvbiA9IGFzeW5jIChyZXRyaWVzID0gNSwgZGVsYXkgPSA1MDAwKSA9PiB7XG4gIGxldCBjdXJyZW50VHJ5ID0gMDtcbiAgXG4gIHdoaWxlIChjdXJyZW50VHJ5IDwgcmV0cmllcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXF1ZWxpemUuYXV0aGVudGljYXRlKCk7XG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkuJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY3VycmVudFRyeSsrO1xuICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlIChhdHRlbXB0ICR7Y3VycmVudFRyeX0vJHtyZXRyaWVzfSk6YCwgZXJyb3IpO1xuICAgICAgXG4gICAgICBpZiAoY3VycmVudFRyeSA+PSByZXRyaWVzKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01heGltdW0gY29ubmVjdGlvbiBhdHRlbXB0cyByZWFjaGVkLiBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZC4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHdlIG1pZ2h0IHdhbnQgdG8gbm90aWZ5IGFkbWluaXN0cmF0b3JzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgLy8gSGVyZSB5b3UgY291bGQgaW50ZWdyYXRlIHdpdGggYW4gZXJyb3IgcmVwb3J0aW5nIHNlcnZpY2UgbGlrZSBTZW50cnlcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdDUklUSUNBTDogRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQgaW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFdhaXQgYmVmb3JlIHRyeWluZyBhZ2FpblxuICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIGluICR7ZGVsYXkvMTAwMH0gc2Vjb25kcy4uLmApO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlXG5jb25zdCBpbml0RGIgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gRmlyc3QgdGVzdCB0aGUgY29ubmVjdGlvbiB3aXRoIHJldHJ5IGxvZ2ljXG4gICAgY29uc3QgY29ubmVjdGlvblN1Y2Nlc3NmdWwgPSBhd2FpdCB0ZXN0Q29ubmVjdGlvbigpO1xuICAgIFxuICAgIC8vIElmIGNvbm5lY3Rpb24gZmFpbGVkLCByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWNvbm5lY3Rpb25TdWNjZXNzZnVsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCBhZnRlciBtdWx0aXBsZSByZXRyaWVzJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIEltcG9ydCBtb2RlbHNcbiAgICByZXF1aXJlKCcuL21vZGVscy9Vc2VyJyk7XG4gICAgcmVxdWlyZSgnLi9tb2RlbHMvSW52b2ljZScpO1xuICAgIFxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHdlIGRvbid0IHdhbnQgdG8gYWx0ZXIgdGFibGVzIGF1dG9tYXRpY2FsbHlcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBkb25lIHRocm91Z2ggbWlncmF0aW9uc1xuICAgIGNvbnN0IHN5bmNPcHRpb25zID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgXG4gICAgICA/IHsgYWx0ZXI6IHRydWUgfVxuICAgICAgOiB7IGFsdGVyOiBmYWxzZSB9O1xuICAgIFxuICAgIGF3YWl0IHNlcXVlbGl6ZS5zeW5jKHN5bmNPcHRpb25zKTtcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2Ugc3luY2hyb25pemVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaHJvbml6aW5nIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB3ZSBtaWdodCB3YW50IHRvIG5vdGlmeSBhZG1pbmlzdHJhdG9yc1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBIZXJlIHlvdSBjb3VsZCBpbnRlZ3JhdGUgd2l0aCBhbiBlcnJvciByZXBvcnRpbmcgc2VydmljZSBsaWtlIFNlbnRyeVxuICAgICAgY29uc29sZS5lcnJvcignQ1JJVElDQUw6IERhdGFiYXNlIHN5bmNocm9uaXphdGlvbiBmYWlsZWQgaW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudCcpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmV4cG9ydCB7IHNlcXVlbGl6ZSwgdGVzdENvbm5lY3Rpb24sIGluaXREYiB9OyJdLCJuYW1lcyI6WyJTZXF1ZWxpemUiLCJzZXF1ZWxpemUiLCJwcm9jZXNzIiwiZW52IiwiUE9TVEdSRVNfVVJMIiwiY29uc29sZSIsImxvZyIsImRpYWxlY3QiLCJsb2dnaW5nIiwiZGlhbGVjdE9wdGlvbnMiLCJzc2wiLCJyZXF1aXJlIiwicmVqZWN0VW5hdXRob3JpemVkIiwiREJfTkFNRSIsIkRCX1VTRVIiLCJEQl9QQVNTV09SRCIsImhvc3QiLCJEQl9IT1NUIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsInRlc3RDb25uZWN0aW9uIiwicmV0cmllcyIsImRlbGF5IiwiY3VycmVudFRyeSIsImF1dGhlbnRpY2F0ZSIsImVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiaW5pdERiIiwiY29ubmVjdGlvblN1Y2Nlc3NmdWwiLCJzeW5jT3B0aW9ucyIsImFsdGVyIiwic3luYyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/db/db.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/Invoice.ts":
/*!**********************************!*\
  !*** ./lib/db/models/Invoice.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db */ \"(api)/./lib/db/db.ts\");\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./User */ \"(api)/./lib/db/models/User.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_1__, _User__WEBPACK_IMPORTED_MODULE_2__]);\n([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_1__, _User__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst Invoice = _db__WEBPACK_IMPORTED_MODULE_1__.sequelize.define(\"Invoice\", {\n    id: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUIDV4,\n        primaryKey: true\n    },\n    invoiceNumber: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    invoiceDate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATEONLY,\n        allowNull: false,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.NOW\n    },\n    dueDate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATEONLY,\n        allowNull: true\n    },\n    logoUrl: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    sender: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: {\n            name: \"\",\n            address: \"\",\n            city: \"\",\n            postalCode: \"\",\n            country: \"\"\n        }\n    },\n    recipient: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: {\n            name: \"\",\n            address: \"\",\n            city: \"\",\n            postalCode: \"\",\n            country: \"\"\n        }\n    },\n    items: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: []\n    },\n    currency: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false,\n        defaultValue: \"USD\"\n    },\n    taxRate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    subtotal: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    total: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    UserId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        allowNull: false,\n        references: {\n            model: \"Users\",\n            key: \"id\"\n        }\n    }\n}, {\n    timestamps: true,\n    hooks: {\n        beforeCreate: (invoice)=>{\n            // Calculate subtotal and total before saving\n            const subtotal = invoice.items.reduce((sum, item)=>sum + item.quantity * item.unitPrice, 0);\n            const taxAmount = subtotal * (invoice.taxRate / 100);\n            invoice.subtotal = subtotal;\n            invoice.total = subtotal + taxAmount;\n        },\n        beforeUpdate: (invoice)=>{\n            // Recalculate if items or tax rate changed\n            if (invoice.changed(\"items\") || invoice.changed(\"taxRate\")) {\n                const subtotal = invoice.items.reduce((sum, item)=>sum + item.quantity * item.unitPrice, 0);\n                const taxAmount = subtotal * (invoice.taxRate / 100);\n                invoice.subtotal = subtotal;\n                invoice.total = subtotal + taxAmount;\n            }\n        }\n    }\n});\n// Define association\n_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].hasMany(Invoice);\nInvoice.belongsTo(_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Invoice);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzdCO1FBQ0Y7SUFDRjtBQUNGO0FBR0YscUJBQXFCO0FBQ3JCNUMscURBQVksQ0FBQ0M7QUFDYkEsUUFBUStDLFNBQVMsQ0FBQ2hELDZDQUFJQTtBQUV0QixpRUFBZUMsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2VnZW4vLi9saWIvZGIvbW9kZWxzL0ludm9pY2UudHM/ZmRlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsLCBPcHRpb25hbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBzZXF1ZWxpemUgfSBmcm9tICcuLi9kYic7XG5pbXBvcnQgVXNlciBmcm9tICcuL1VzZXInO1xuXG4vLyBEZWZpbmUgSW52b2ljZSBJdGVtIGludGVyZmFjZVxuaW50ZXJmYWNlIEludm9pY2VJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcXVhbnRpdHk6IG51bWJlcjtcbiAgdW5pdFByaWNlOiBudW1iZXI7XG59XG5cbi8vIERlZmluZSBJbnZvaWNlIGF0dHJpYnV0ZXNcbmludGVyZmFjZSBJbnZvaWNlQXR0cmlidXRlcyB7XG4gIGlkOiBzdHJpbmc7XG4gIGludm9pY2VOdW1iZXI6IHN0cmluZztcbiAgaW52b2ljZURhdGU6IERhdGU7XG4gIGR1ZURhdGU/OiBEYXRlO1xuICBsb2dvVXJsPzogc3RyaW5nO1xuICBzZW5kZXI6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogc3RyaW5nO1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuICByZWNpcGllbnQ6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogc3RyaW5nO1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuICBpdGVtczogSW52b2ljZUl0ZW1bXTtcbiAgY3VycmVuY3k6IHN0cmluZztcbiAgdGF4UmF0ZTogbnVtYmVyO1xuICBzdWJ0b3RhbDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xuICBVc2VySWQ6IHN0cmluZztcbiAgY3JlYXRlZEF0PzogRGF0ZTtcbiAgdXBkYXRlZEF0PzogRGF0ZTtcbn1cblxuLy8gRGVmaW5lIG9wdGlvbmFsIGF0dHJpYnV0ZXMgZm9yIEludm9pY2UgY3JlYXRpb25cbmludGVyZmFjZSBJbnZvaWNlQ3JlYXRpb25BdHRyaWJ1dGVzIGV4dGVuZHMgT3B0aW9uYWw8SW52b2ljZUF0dHJpYnV0ZXMsICdpZCcgfCAnaW52b2ljZU51bWJlcicgfCAnc3VidG90YWwnIHwgJ3RvdGFsJz4ge31cblxuLy8gRGVmaW5lIEludm9pY2UgbW9kZWxcbmludGVyZmFjZSBJbnZvaWNlSW5zdGFuY2UgZXh0ZW5kcyBNb2RlbDxJbnZvaWNlQXR0cmlidXRlcywgSW52b2ljZUNyZWF0aW9uQXR0cmlidXRlcz4sIEludm9pY2VBdHRyaWJ1dGVzIHt9XG5cbmNvbnN0IEludm9pY2UgPSBzZXF1ZWxpemUuZGVmaW5lPEludm9pY2VJbnN0YW5jZT4oXG4gICdJbnZvaWNlJyxcbiAge1xuICAgIGlkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIHByaW1hcnlLZXk6IHRydWVcbiAgICB9LFxuICAgIGludm9pY2VOdW1iZXI6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGludm9pY2VEYXRlOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuREFURU9OTFksXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XXG4gICAgfSxcbiAgICBkdWVEYXRlOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuREFURU9OTFksXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGxvZ29Vcmw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIHNlbmRlcjoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgIGNpdHk6ICcnLFxuICAgICAgICBwb3N0YWxDb2RlOiAnJyxcbiAgICAgICAgY291bnRyeTogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlY2lwaWVudDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgIGNpdHk6ICcnLFxuICAgICAgICBwb3N0YWxDb2RlOiAnJyxcbiAgICAgICAgY291bnRyeTogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZW1zOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSlNPTkIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBbXVxuICAgIH0sXG4gICAgY3VycmVuY3k6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiAnVVNEJ1xuICAgIH0sXG4gICAgdGF4UmF0ZToge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkZMT0FULFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogMFxuICAgIH0sXG4gICAgc3VidG90YWw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5GTE9BVCxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBkZWZhdWx0VmFsdWU6IDBcbiAgICB9LFxuICAgIHRvdGFsOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBVc2VySWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgIGtleTogJ2lkJ1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgaG9va3M6IHtcbiAgICAgIGJlZm9yZUNyZWF0ZTogKGludm9pY2U6IEludm9pY2VJbnN0YW5jZSkgPT4ge1xuICAgICAgICAvLyBDYWxjdWxhdGUgc3VidG90YWwgYW5kIHRvdGFsIGJlZm9yZSBzYXZpbmdcbiAgICAgICAgY29uc3Qgc3VidG90YWwgPSBpbnZvaWNlLml0ZW1zLnJlZHVjZShcbiAgICAgICAgICAoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5xdWFudGl0eSAqIGl0ZW0udW5pdFByaWNlKSxcbiAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRheEFtb3VudCA9IHN1YnRvdGFsICogKGludm9pY2UudGF4UmF0ZSAvIDEwMCk7XG4gICAgICAgIFxuICAgICAgICBpbnZvaWNlLnN1YnRvdGFsID0gc3VidG90YWw7XG4gICAgICAgIGludm9pY2UudG90YWwgPSBzdWJ0b3RhbCArIHRheEFtb3VudDtcbiAgICAgIH0sXG4gICAgICBiZWZvcmVVcGRhdGU6IChpbnZvaWNlOiBJbnZvaWNlSW5zdGFuY2UpID0+IHtcbiAgICAgICAgLy8gUmVjYWxjdWxhdGUgaWYgaXRlbXMgb3IgdGF4IHJhdGUgY2hhbmdlZFxuICAgICAgICBpZiAoaW52b2ljZS5jaGFuZ2VkKCdpdGVtcycpIHx8IGludm9pY2UuY2hhbmdlZCgndGF4UmF0ZScpKSB7XG4gICAgICAgICAgY29uc3Qgc3VidG90YWwgPSBpbnZvaWNlLml0ZW1zLnJlZHVjZShcbiAgICAgICAgICAgIChzdW0sIGl0ZW0pID0+IHN1bSArIChpdGVtLnF1YW50aXR5ICogaXRlbS51bml0UHJpY2UpLFxuICAgICAgICAgICAgMFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgdGF4QW1vdW50ID0gc3VidG90YWwgKiAoaW52b2ljZS50YXhSYXRlIC8gMTAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpbnZvaWNlLnN1YnRvdGFsID0gc3VidG90YWw7XG4gICAgICAgICAgaW52b2ljZS50b3RhbCA9IHN1YnRvdGFsICsgdGF4QW1vdW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4pO1xuXG4vLyBEZWZpbmUgYXNzb2NpYXRpb25cblVzZXIuaGFzTWFueShJbnZvaWNlKTtcbkludm9pY2UuYmVsb25nc1RvKFVzZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBJbnZvaWNlOyJdLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJzZXF1ZWxpemUiLCJVc2VyIiwiSW52b2ljZSIsImRlZmluZSIsImlkIiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJwcmltYXJ5S2V5IiwiaW52b2ljZU51bWJlciIsIlNUUklORyIsImFsbG93TnVsbCIsImludm9pY2VEYXRlIiwiREFURU9OTFkiLCJOT1ciLCJkdWVEYXRlIiwibG9nb1VybCIsInNlbmRlciIsIkpTT05CIiwibmFtZSIsImFkZHJlc3MiLCJjaXR5IiwicG9zdGFsQ29kZSIsImNvdW50cnkiLCJyZWNpcGllbnQiLCJpdGVtcyIsImN1cnJlbmN5IiwidGF4UmF0ZSIsIkZMT0FUIiwic3VidG90YWwiLCJ0b3RhbCIsIlVzZXJJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsInRpbWVzdGFtcHMiLCJob29rcyIsImJlZm9yZUNyZWF0ZSIsImludm9pY2UiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwicXVhbnRpdHkiLCJ1bml0UHJpY2UiLCJ0YXhBbW91bnQiLCJiZWZvcmVVcGRhdGUiLCJjaGFuZ2VkIiwiaGFzTWFueSIsImJlbG9uZ3NUbyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/Invoice.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/User.ts":
/*!*******************************!*\
  !*** ./lib/db/models/User.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db */ \"(api)/./lib/db/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_2__]);\n([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst User = _db__WEBPACK_IMPORTED_MODULE_2__.sequelize.define(\"User\", {\n    id: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUIDV4,\n        primaryKey: true\n    },\n    email: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false,\n        unique: true,\n        validate: {\n            isEmail: true\n        }\n    },\n    password: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    emailVerified: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.BOOLEAN,\n        defaultValue: false\n    },\n    name: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    image: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    googleId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true,\n        unique: true\n    },\n    settings: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        defaultValue: {\n            sender: {\n                name: \"\",\n                address: \"\",\n                city: \"\",\n                postalCode: \"\",\n                country: \"\"\n            },\n            logoUrl: \"\"\n        }\n    }\n}, {\n    timestamps: true,\n    hooks: {\n        beforeCreate: async (user)=>{\n            if (user.password) {\n                const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n                const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(user.password, salt);\n                user.password = hashedPassword;\n            }\n        },\n        beforeUpdate: async (user)=>{\n            if (user.changed(\"password\") && user.password) {\n                const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n                const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(user.password, salt);\n                user.password = hashedPassword;\n            }\n        }\n    }\n});\n// Instance method to compare password\nUser.prototype.comparePassword = async function(candidatePassword) {\n    // If user has no password (e.g., Google auth user), return false\n    if (!this.password) {\n        return false;\n    }\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDekI7QUFDSTtBQWlDbEMsTUFBTUcsT0FBT0QsMENBQVNBLENBQUNFLE1BQU0sQ0FDM0IsUUFDQTtJQUNFQyxJQUFJO1FBQ0ZDLE1BQU1OLGdEQUFTQSxDQUFDTyxJQUFJO1FBQ3BCQyxjQUFjUixnREFBU0EsQ0FBQ1MsTUFBTTtRQUM5QkMsWUFBWTtJQUNkO0lBQ0FDLE9BQU87UUFDTEwsTUFBTU4sZ0RBQVNBLENBQUNZLE1BQU07UUFDdEJDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxVQUFVO1lBQ1JDLFNBQVM7UUFDWDtJQUNGO0lBQ0FDLFVBQVU7UUFDUlgsTUFBTU4sZ0RBQVNBLENBQUNZLE1BQU07UUFDdEJDLFdBQVc7SUFDYjtJQUNBSyxlQUFlO1FBQ2JaLE1BQU1OLGdEQUFTQSxDQUFDbUIsT0FBTztRQUN2QlgsY0FBYztJQUNoQjtJQUNBWSxNQUFNO1FBQ0pkLE1BQU1OLGdEQUFTQSxDQUFDWSxNQUFNO1FBQ3RCQyxXQUFXO0lBQ2I7SUFDQVEsT0FBTztRQUNMZixNQUFNTixnREFBU0EsQ0FBQ1ksTUFBTTtRQUN0QkMsV0FBVztJQUNiO0lBQ0FTLFVBQVU7UUFDUmhCLE1BQU1OLGdEQUFTQSxDQUFDWSxNQUFNO1FBQ3RCQyxXQUFXO1FBQ1hDLFFBQVE7SUFDVjtJQUNBUyxVQUFVO1FBQ1JqQixNQUFNTixnREFBU0EsQ0FBQ3dCLEtBQUs7UUFDckJoQixjQUFjO1lBQ1ppQixRQUFRO2dCQUNOTCxNQUFNO2dCQUNOTSxTQUFTO2dCQUNUQyxNQUFNO2dCQUNOQyxZQUFZO2dCQUNaQyxTQUFTO1lBQ1g7WUFDQUMsU0FBUztRQUNYO0lBQ0Y7QUFDRixHQUNBO0lBQ0VDLFlBQVk7SUFDWkMsT0FBTztRQUNMQyxjQUFjLE9BQU9DO1lBQ25CLElBQUlBLEtBQUtqQixRQUFRLEVBQUU7Z0JBQ2pCLE1BQU1rQixPQUFPLE1BQU1sQyx1REFBYyxDQUFDO2dCQUNsQyxNQUFNb0MsaUJBQXlCLE1BQU1wQyxvREFBVyxDQUFDaUMsS0FBS2pCLFFBQVEsRUFBRWtCO2dCQUNoRUQsS0FBS2pCLFFBQVEsR0FBR29CO1lBQ2xCO1FBQ0Y7UUFDQUUsY0FBYyxPQUFPTDtZQUNuQixJQUFJQSxLQUFLTSxPQUFPLENBQUMsZUFBZU4sS0FBS2pCLFFBQVEsRUFBRTtnQkFDN0MsTUFBTWtCLE9BQU8sTUFBTWxDLHVEQUFjLENBQUM7Z0JBQ2xDLE1BQU1vQyxpQkFBeUIsTUFBTXBDLG9EQUFXLENBQUNpQyxLQUFLakIsUUFBUSxFQUFFa0I7Z0JBQ2hFRCxLQUFLakIsUUFBUSxHQUFHb0I7WUFDbEI7UUFDRjtJQUNGO0FBQ0Y7QUFHRixzQ0FBc0M7QUFDdENsQyxLQUFLc0MsU0FBUyxDQUFDQyxlQUFlLEdBQUcsZUFBZUMsaUJBQXlCO0lBQ3ZFLGlFQUFpRTtJQUNqRSxJQUFJLENBQUMsSUFBSSxDQUFDMUIsUUFBUSxFQUFFO1FBQ2xCLE9BQU87SUFDVDtJQUNBLE9BQU8sTUFBTWhCLHVEQUFjLENBQUMwQyxtQkFBbUIsSUFBSSxDQUFDMUIsUUFBUTtBQUM5RDtBQUVBLGlFQUFlZCxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZWdlbi8uL2xpYi9kYi9tb2RlbHMvVXNlci50cz82MTZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwsIE9wdGlvbmFsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IHsgc2VxdWVsaXplIH0gZnJvbSAnLi4vZGInO1xuXG4vLyBEZWZpbmUgVXNlciBhdHRyaWJ1dGVzXG5pbnRlcmZhY2UgVXNlckF0dHJpYnV0ZXMge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZD86IHN0cmluZztcbiAgZW1haWxWZXJpZmllZDogYm9vbGVhbjtcbiAgbmFtZT86IHN0cmluZztcbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIGdvb2dsZUlkPzogc3RyaW5nO1xuICBzZXR0aW5nczoge1xuICAgIHNlbmRlcj86IHtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIGFkZHJlc3M6IHN0cmluZztcbiAgICAgIGNpdHk6IHN0cmluZztcbiAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICAgIGNvdW50cnk6IHN0cmluZztcbiAgICB9O1xuICAgIGxvZ29Vcmw/OiBzdHJpbmc7XG4gIH07XG4gIGNyZWF0ZWRBdD86IERhdGU7XG4gIHVwZGF0ZWRBdD86IERhdGU7XG59XG5cbi8vIERlZmluZSBvcHRpb25hbCBhdHRyaWJ1dGVzIGZvciBVc2VyIGNyZWF0aW9uXG5pbnRlcmZhY2UgVXNlckNyZWF0aW9uQXR0cmlidXRlcyBleHRlbmRzIE9wdGlvbmFsPFVzZXJBdHRyaWJ1dGVzLCAnaWQnIHwgJ2VtYWlsVmVyaWZpZWQnIHwgJ3NldHRpbmdzJz4ge31cblxuLy8gRGVmaW5lIFVzZXIgbW9kZWwgd2l0aCBpbnN0YW5jZSBtZXRob2RzXG5pbnRlcmZhY2UgVXNlckluc3RhbmNlIGV4dGVuZHMgTW9kZWw8VXNlckF0dHJpYnV0ZXMsIFVzZXJDcmVhdGlvbkF0dHJpYnV0ZXM+LCBVc2VyQXR0cmlidXRlcyB7XG4gIGNvbXBhcmVQYXNzd29yZChjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcbn1cblxuY29uc3QgVXNlciA9IHNlcXVlbGl6ZS5kZWZpbmU8VXNlckluc3RhbmNlPihcbiAgJ1VzZXInLFxuICB7XG4gICAgaWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgaXNFbWFpbDogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGVtYWlsVmVyaWZpZWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgaW1hZ2U6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGdvb2dsZUlkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgdW5pcXVlOiB0cnVlXG4gICAgfSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgZGVmYXVsdFZhbHVlOiB7XG4gICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIGFkZHJlc3M6ICcnLFxuICAgICAgICAgIGNpdHk6ICcnLFxuICAgICAgICAgIHBvc3RhbENvZGU6ICcnLFxuICAgICAgICAgIGNvdW50cnk6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ29Vcmw6ICcnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgICBob29rczoge1xuICAgICAgYmVmb3JlQ3JlYXRlOiBhc3luYyAodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmICh1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcbiAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZDogc3RyaW5nID0gYXdhaXQgYmNyeXB0Lmhhc2godXNlci5wYXNzd29yZCwgc2FsdCk7XG4gICAgICAgICAgdXNlci5wYXNzd29yZCA9IGhhc2hlZFBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYmVmb3JlVXBkYXRlOiBhc3luYyAodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmICh1c2VyLmNoYW5nZWQoJ3Bhc3N3b3JkJykgJiYgdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XG4gICAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyA9IGF3YWl0IGJjcnlwdC5oYXNoKHVzZXIucGFzc3dvcmQsIHNhbHQpO1xuICAgICAgICAgIHVzZXIucGFzc3dvcmQgPSBoYXNoZWRQYXNzd29yZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuKTtcblxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIGNvbXBhcmUgcGFzc3dvcmRcblVzZXIucHJvdG90eXBlLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgLy8gSWYgdXNlciBoYXMgbm8gcGFzc3dvcmQgKGUuZy4sIEdvb2dsZSBhdXRoIHVzZXIpLCByZXR1cm4gZmFsc2VcbiAgaWYgKCF0aGlzLnBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJiY3J5cHQiLCJzZXF1ZWxpemUiLCJVc2VyIiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsInByaW1hcnlLZXkiLCJlbWFpbCIsIlNUUklORyIsImFsbG93TnVsbCIsInVuaXF1ZSIsInZhbGlkYXRlIiwiaXNFbWFpbCIsInBhc3N3b3JkIiwiZW1haWxWZXJpZmllZCIsIkJPT0xFQU4iLCJuYW1lIiwiaW1hZ2UiLCJnb29nbGVJZCIsInNldHRpbmdzIiwiSlNPTkIiLCJzZW5kZXIiLCJhZGRyZXNzIiwiY2l0eSIsInBvc3RhbENvZGUiLCJjb3VudHJ5IiwibG9nb1VybCIsInRpbWVzdGFtcHMiLCJob29rcyIsImJlZm9yZUNyZWF0ZSIsInVzZXIiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsImJlZm9yZVVwZGF0ZSIsImNoYW5nZWQiLCJwcm90b3R5cGUiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/User.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/index.ts":
/*!********************************!*\
  !*** ./lib/db/models/index.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Invoice: () => (/* reexport safe */ _Invoice__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   User: () => (/* reexport safe */ _User__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./User */ \"(api)/./lib/db/models/User.ts\");\n/* harmony import */ var _Invoice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Invoice */ \"(api)/./lib/db/models/Invoice.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_User__WEBPACK_IMPORTED_MODULE_0__, _Invoice__WEBPACK_IMPORTED_MODULE_1__]);\n([_User__WEBPACK_IMPORTED_MODULE_0__, _Invoice__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIvbW9kZWxzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEI7QUFDTTtBQUs5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2VnZW4vLi9saWIvZGIvbW9kZWxzL2luZGV4LnRzPzY3NTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJztcbmltcG9ydCBJbnZvaWNlIGZyb20gJy4vSW52b2ljZSc7XG5cbmV4cG9ydCB7XG4gIFVzZXIsXG4gIEludm9pY2Vcbn07Il0sIm5hbWVzIjpbIlVzZXIiLCJJbnZvaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/index.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/register.ts":
/*!************************************!*\
  !*** ./pages/api/auth/register.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_api_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/api-utils */ \"(api)/./lib/api-utils.ts\");\n/* harmony import */ var _lib_db_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db/models */ \"(api)/./lib/db/models/index.ts\");\n/* harmony import */ var _lib_db_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/db/db */ \"(api)/./lib/db/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_api_utils__WEBPACK_IMPORTED_MODULE_1__, _lib_db_models__WEBPACK_IMPORTED_MODULE_2__, _lib_db_db__WEBPACK_IMPORTED_MODULE_3__]);\n([_lib_api_utils__WEBPACK_IMPORTED_MODULE_1__, _lib_db_models__WEBPACK_IMPORTED_MODULE_2__, _lib_db_db__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nasync function handler(req, res) {\n    // Only allow POST requests\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            success: false,\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        // Initialize database connection\n        const dbInitialized = await (0,_lib_db_db__WEBPACK_IMPORTED_MODULE_3__.initDb)();\n        // Check if database initialization was successful\n        if (!dbInitialized) {\n            return res.status(500).json({\n                success: false,\n                message: \"Database connection failed. Please try again later.\"\n            });\n        }\n        const { email, password } = req.body;\n        // Validate input\n        if (!email || !password) {\n            return res.status(400).json({\n                success: false,\n                message: \"Email and password are required\"\n            });\n        }\n        // Check if email is valid\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(email)) {\n            return res.status(400).json({\n                success: false,\n                message: \"Invalid email format\"\n            });\n        }\n        // Check if password is strong enough\n        if (password.length < 8) {\n            return res.status(400).json({\n                success: false,\n                message: \"Password must be at least 8 characters long\"\n            });\n        }\n        // Check if user already exists\n        const existingUser = await _lib_db_models__WEBPACK_IMPORTED_MODULE_2__.User.findOne({\n            where: {\n                email\n            }\n        });\n        if (existingUser) {\n            return res.status(400).json({\n                success: false,\n                message: \"User with this email already exists\"\n            });\n        }\n        // Create new user with email verification required\n        const user = await _lib_db_models__WEBPACK_IMPORTED_MODULE_2__.User.create({\n            email,\n            password,\n            emailVerified: false,\n            settings: {\n                sender: {\n                    name: \"\",\n                    address: \"\",\n                    city: \"\",\n                    postalCode: \"\",\n                    country: \"\"\n                },\n                logoUrl: \"\"\n            }\n        });\n        // Generate verification token\n        const verificationToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n            id: user.id\n        }, process.env.JWT_SECRET || \"your_jwt_secret_key_change_this_in_production\", {\n            expiresIn: \"24h\"\n        } // Token expires in 24 hours\n        );\n        // In a production environment, you would send an email with the verification link\n        // For development, we'll just log the verification URL\n        const verificationUrl = `${\"http://localhost:3000\"}/api/auth/verify-email?token=${verificationToken}`;\n        console.log(\"Verification URL:\", verificationUrl);\n        // Remove password from response\n        const userResponse = {\n            id: user.id,\n            email: user.email,\n            emailVerified: user.emailVerified,\n            settings: user.settings,\n            createdAt: user.createdAt\n        };\n        return (0,_lib_api_utils__WEBPACK_IMPORTED_MODULE_1__.handleSuccess)(res, userResponse, \"User registered successfully. Please check your email to verify your account.\", 201);\n    } catch (error) {\n        console.error(\"Registration error:\", error);\n        // Check for specific error types\n        if (error && typeof error === \"object\" && \"name\" in error) {\n            // Handle Sequelize connection errors\n            if (error.name === \"SequelizeConnectionError\" || error.name === \"SequelizeConnectionRefusedError\") {\n                return res.status(503).json({\n                    success: false,\n                    message: \"Database service unavailable. Please try again later.\"\n                });\n            }\n            // Handle Sequelize validation errors\n            if (error.name === \"SequelizeValidationError\" && \"errors\" in error && Array.isArray(error.errors)) {\n                return res.status(400).json({\n                    success: false,\n                    message: \"Validation error\",\n                    errors: error.errors.map((e)=>e.message)\n                });\n            }\n            // Handle Sequelize unique constraint errors\n            if (error.name === \"SequelizeUniqueConstraintError\") {\n                return res.status(400).json({\n                    success: false,\n                    message: \"User with this email already exists\"\n                });\n            }\n        }\n        // For other errors, use the general error handler\n        return (0,_lib_api_utils__WEBPACK_IMPORTED_MODULE_1__.handleError)(res, error);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2pDLElBQUlBLFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLE9BQU87WUFDekQscUNBQXFDO1lBQ3JDLElBQUlBLE1BQU1uQixJQUFJLEtBQUssOEJBQThCbUIsTUFBTW5CLElBQUksS0FBSyxtQ0FBbUM7Z0JBQ2pHLE9BQU9yQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsU0FBUztvQkFDVEMsU0FBUztnQkFDWDtZQUNGO1lBRUEscUNBQXFDO1lBQ3JDLElBQUltQyxNQUFNbkIsSUFBSSxLQUFLLDhCQUE4QixZQUFZbUIsU0FBU0MsTUFBTUMsT0FBTyxDQUFDRixNQUFNRyxNQUFNLEdBQUc7Z0JBQ2pHLE9BQU8zQyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUMxQkMsU0FBUztvQkFDVEMsU0FBUztvQkFDVHNDLFFBQVFILE1BQU1HLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLElBQVdBLEVBQUV4QyxPQUFPO2dCQUNoRDtZQUNGO1lBRUEsNENBQTRDO1lBQzVDLElBQUltQyxNQUFNbkIsSUFBSSxLQUFLLGtDQUFrQztnQkFDbkQsT0FBT3JCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQzFCQyxTQUFTO29CQUNUQyxTQUFTO2dCQUNYO1lBQ0Y7UUFDRjtRQUVBLGtEQUFrRDtRQUNsRCxPQUFPWCwyREFBV0EsQ0FBQ00sS0FBS3dDO0lBQzFCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlZ2VuLy4vcGFnZXMvYXBpL2F1dGgvcmVnaXN0ZXIudHM/MTNjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBoYW5kbGVFcnJvciwgaGFuZGxlU3VjY2VzcyB9IGZyb20gJy4uLy4uLy4uL2xpYi9hcGktdXRpbHMnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYi9tb2RlbHMnO1xuaW1wb3J0IHsgaW5pdERiIH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiL2RiJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICAvLyBPbmx5IGFsbG93IFBPU1QgcmVxdWVzdHNcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBjb25uZWN0aW9uXG4gICAgY29uc3QgZGJJbml0aWFsaXplZCA9IGF3YWl0IGluaXREYigpO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uIHdhcyBzdWNjZXNzZnVsXG4gICAgaWYgKCFkYkluaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLidcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcbiAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdFbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIGVtYWlsIGlzIHZhbGlkXG4gICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICAgIGlmICghZW1haWxSZWdleC50ZXN0KGVtYWlsKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiBwYXNzd29yZCBpcyBzdHJvbmcgZW5vdWdoXG4gICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZydcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBuZXcgdXNlciB3aXRoIGVtYWlsIHZlcmlmaWNhdGlvbiByZXF1aXJlZFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgZW1haWxWZXJpZmllZDogZmFsc2UsIC8vIEVtYWlsIHZlcmlmaWNhdGlvbiByZXF1aXJlZFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2VuZGVyOiB7XG4gICAgICAgICAgbmFtZTogJycsXG4gICAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgICAgY2l0eTogJycsXG4gICAgICAgICAgcG9zdGFsQ29kZTogJycsXG4gICAgICAgICAgY291bnRyeTogJydcbiAgICAgICAgfSxcbiAgICAgICAgbG9nb1VybDogJydcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSB2ZXJpZmljYXRpb24gdG9rZW5cbiAgICBjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGp3dC5zaWduKFxuICAgICAgeyBpZDogdXNlci5pZCB9LFxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91cl9qd3Rfc2VjcmV0X2tleV9jaGFuZ2VfdGhpc19pbl9wcm9kdWN0aW9uJyxcbiAgICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9IC8vIFRva2VuIGV4cGlyZXMgaW4gMjQgaG91cnNcbiAgICApO1xuICAgIFxuICAgIC8vIEluIGEgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCwgeW91IHdvdWxkIHNlbmQgYW4gZW1haWwgd2l0aCB0aGUgdmVyaWZpY2F0aW9uIGxpbmtcbiAgICAvLyBGb3IgZGV2ZWxvcG1lbnQsIHdlJ2xsIGp1c3QgbG9nIHRoZSB2ZXJpZmljYXRpb24gVVJMXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uVXJsID0gYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTH0vYXBpL2F1dGgvdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dmVyaWZpY2F0aW9uVG9rZW59YDtcbiAgICBjb25zb2xlLmxvZygnVmVyaWZpY2F0aW9uIFVSTDonLCB2ZXJpZmljYXRpb25VcmwpO1xuICAgIFxuICAgIC8vIFJlbW92ZSBwYXNzd29yZCBmcm9tIHJlc3BvbnNlXG4gICAgY29uc3QgdXNlclJlc3BvbnNlID0ge1xuICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGVtYWlsVmVyaWZpZWQ6IHVzZXIuZW1haWxWZXJpZmllZCxcbiAgICAgIHNldHRpbmdzOiB1c2VyLnNldHRpbmdzLFxuICAgICAgY3JlYXRlZEF0OiB1c2VyLmNyZWF0ZWRBdFxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGhhbmRsZVN1Y2Nlc3MocmVzLCB1c2VyUmVzcG9uc2UsICdVc2VyIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5LiBQbGVhc2UgY2hlY2sgeW91ciBlbWFpbCB0byB2ZXJpZnkgeW91ciBhY2NvdW50LicsIDIwMSk7XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgY29uc29sZS5lcnJvcignUmVnaXN0cmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igc3BlY2lmaWMgZXJyb3IgdHlwZXNcbiAgICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbmFtZScgaW4gZXJyb3IpIHtcbiAgICAgIC8vIEhhbmRsZSBTZXF1ZWxpemUgY29ubmVjdGlvbiBlcnJvcnNcbiAgICAgIGlmIChlcnJvci5uYW1lID09PSAnU2VxdWVsaXplQ29ubmVjdGlvbkVycm9yJyB8fCBlcnJvci5uYW1lID09PSAnU2VxdWVsaXplQ29ubmVjdGlvblJlZnVzZWRFcnJvcicpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAzKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2Ugc2VydmljZSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgU2VxdWVsaXplIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZVZhbGlkYXRpb25FcnJvcicgJiYgJ2Vycm9ycycgaW4gZXJyb3IgJiYgQXJyYXkuaXNBcnJheShlcnJvci5lcnJvcnMpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZXJyb3InLFxuICAgICAgICAgIGVycm9yczogZXJyb3IuZXJyb3JzLm1hcCgoZTogYW55KSA9PiBlLm1lc3NhZ2UpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgU2VxdWVsaXplIHVuaXF1ZSBjb25zdHJhaW50IGVycm9yc1xuICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdTZXF1ZWxpemVVbmlxdWVDb25zdHJhaW50RXJyb3InKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ1VzZXIgd2l0aCB0aGlzIGVtYWlsIGFscmVhZHkgZXhpc3RzJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIG90aGVyIGVycm9ycywgdXNlIHRoZSBnZW5lcmFsIGVycm9yIGhhbmRsZXJcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IocmVzLCBlcnJvcik7XG4gIH1cbn0iXSwibmFtZXMiOlsiand0IiwiaGFuZGxlRXJyb3IiLCJoYW5kbGVTdWNjZXNzIiwiVXNlciIsImluaXREYiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkYkluaXRpYWxpemVkIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJlbWFpbFJlZ2V4IiwidGVzdCIsImxlbmd0aCIsImV4aXN0aW5nVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsInVzZXIiLCJjcmVhdGUiLCJlbWFpbFZlcmlmaWVkIiwic2V0dGluZ3MiLCJzZW5kZXIiLCJuYW1lIiwiYWRkcmVzcyIsImNpdHkiLCJwb3N0YWxDb2RlIiwiY291bnRyeSIsImxvZ29VcmwiLCJ2ZXJpZmljYXRpb25Ub2tlbiIsInNpZ24iLCJpZCIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwidmVyaWZpY2F0aW9uVXJsIiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyUmVzcG9uc2UiLCJjcmVhdGVkQXQiLCJlcnJvciIsIkFycmF5IiwiaXNBcnJheSIsImVycm9ycyIsIm1hcCIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/register.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fregister.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();