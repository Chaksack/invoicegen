/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "(api)/./lib/db sync recursive":
/*!**********************!*\
  !*** ./lib/db/ sync ***!
  \**********************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(api)/./lib/db sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("pg");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "@auth/sequelize-adapter":
/*!******************************************!*\
  !*** external "@auth/sequelize-adapter" ***!
  \******************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@auth/sequelize-adapter");;

/***/ }),

/***/ "sequelize":
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = import("sequelize");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2F%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2F%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/auth/[...nextauth].ts */ \"(api)/./pages/api/auth/[...nextauth].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/[...nextauth]\",\n        pathname: \"/api/auth/[...nextauth]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_nextauth_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYXV0aCUyRiU1Qi4uLm5leHRhdXRoJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZWdlbi8/YjZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2F%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db/db.ts":
/*!**********************!*\
  !*** ./lib/db/db.ts ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initDb: () => (/* binding */ initDb),\n/* harmony export */   sequelize: () => (/* binding */ sequelize),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__]);\nsequelize__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Explicitly require pg to ensure it's loaded\n// This helps prevent the \"Please install pg package manually\" error in serverless environments\nlet pgLoaded = false;\n// First attempt - standard require\ntry {\n    __webpack_require__(/*! pg */ \"pg\");\n    console.log(\"Successfully loaded pg package (standard require)\");\n    pgLoaded = true;\n} catch (error) {\n    console.error(\"Error loading pg package (standard require):\", error);\n}\n// Second attempt - using dynamic import if first attempt failed\nif (!pgLoaded) {\n    try {\n        const pg = __webpack_require__(/*! pg */ \"pg\");\n        console.log(\"Successfully loaded pg package (variable assignment)\");\n        pgLoaded = true;\n    } catch (secondError) {\n        console.error(\"Error loading pg package (variable assignment):\", secondError);\n    }\n}\n// Third attempt - using path resolution if previous attempts failed\nif (!pgLoaded) {\n    try {\n        const path = __webpack_require__(/*! path */ \"path\");\n        const pgPath = path.resolve(process.cwd(), \"node_modules/pg\");\n        const pg = __webpack_require__(\"(api)/./lib/db sync recursive\")(pgPath);\n        console.log(\"Successfully loaded pg package (path resolution)\");\n        pgLoaded = true;\n    } catch (thirdError) {\n        console.error(\"Error loading pg package (path resolution):\", thirdError);\n    }\n}\n// Final attempt - using global.__non_webpack_require__ if available (for Next.js)\nif (!pgLoaded && typeof global.__non_webpack_require__ === \"function\") {\n    try {\n        const pg = global.__non_webpack_require__(\"pg\");\n        console.log(\"Successfully loaded pg package (non-webpack require)\");\n        pgLoaded = true;\n    } catch (fourthError) {\n        console.error(\"Error loading pg package (non-webpack require):\", fourthError);\n    }\n}\nif (!pgLoaded) {\n    console.warn(\"âš ï¸ WARNING: Failed to load pg package after multiple attempts. This may cause issues with database connections.\");\n}\n// Initialize Sequelize with environment variables\nlet sequelize;\n// Initialize Sequelize with proper error handling\ntry {\n    // Check if running with Neon database or Vercel Postgres\n    if (process.env.DATABASE_URL || process.env.POSTGRES_URL) {\n        // Prioritize Neon database connection if available\n        const connectionUrl = process.env.DATABASE_URL || process.env.POSTGRES_URL;\n        console.log(\"Using Neon database connection\");\n        // Log connection string (with credentials masked)\n        // We know connectionUrl is defined here because of the if condition above\n        const maskedUrl = connectionUrl.replace(/:\\/\\/([^:]+):([^@]+)@/, \"://$1:****@\");\n        console.log(\"Connection URL (masked):\", maskedUrl);\n        // Use the Neon database connection string\n        sequelize = new sequelize__WEBPACK_IMPORTED_MODULE_0__.Sequelize(connectionUrl, {\n            dialect: \"postgres\",\n            logging:  true ? console.log : 0,\n            dialectOptions: {\n                ssl: {\n                    require: true,\n                    rejectUnauthorized: false\n                },\n                // Add query timeout for Neon database (30 seconds)\n                // This helps prevent long-running queries from causing issues in serverless environments\n                statement_timeout: 30000\n            },\n            // Add retry logic for connection\n            pool: {\n                max: 5,\n                min: 0,\n                acquire: 30000,\n                idle: 10000\n            }\n        });\n    } else if (false) {} else {\n        // Use traditional connection parameters for local development\n        console.log(\"Using local PostgreSQL connection\");\n        sequelize = new sequelize__WEBPACK_IMPORTED_MODULE_0__.Sequelize(process.env.DB_NAME || \"invoicegen\", process.env.DB_USER || \"postgres\", process.env.DB_PASSWORD || \"postgres\", {\n            host: process.env.DB_HOST || \"localhost\",\n            port: parseInt(process.env.DB_PORT || \"5432\"),\n            dialect: \"postgres\",\n            logging:  true ? console.log : 0,\n            dialectOptions: {\n                ssl: false,\n                // Add query timeout for local development (30 seconds)\n                // This helps maintain consistent behavior with production\n                statement_timeout: 30000\n            },\n            // Add retry logic for connection\n            pool: {\n                max: 5,\n                min: 0,\n                acquire: 30000,\n                idle: 10000\n            }\n        });\n    }\n    console.log(\"Sequelize instance created successfully\");\n} catch (error) {\n    console.error(\"Error initializing Sequelize:\", error);\n}\n// Test the connection with retry logic and enhanced error reporting\nconst testConnection = async (retries = 5, delay = 5000)=>{\n    let currentTry = 0;\n    // Log connection attempt with environment info\n    console.log(\"Testing database connection with the following configuration:\");\n    console.log(\"- Environment:\", \"development\" || 0);\n    console.log(\"- Using Neon Database:\", !!process.env.DATABASE_URL);\n    console.log(\"- Using Vercel Postgres:\", !!process.env.POSTGRES_URL && !process.env.DATABASE_URL);\n    console.log(\"- Dialect:\", \"postgres\");\n    while(currentTry < retries){\n        try {\n            await sequelize.authenticate();\n            console.log(\"âœ… Database connection has been established successfully.\");\n            return true;\n        } catch (error) {\n            currentTry++;\n            // Enhanced error logging with more details\n            console.error(`âŒ Unable to connect to the database (attempt ${currentTry}/${retries}):`);\n            console.error(`- Error name: ${error.name || \"Unknown\"}`);\n            console.error(`- Error message: ${error.message || \"No message\"}`);\n            // Log specific details for common errors\n            if (error.name === \"SequelizeConnectionError\") {\n                console.error(\"- This is a connection error. Check if the database server is running and accessible.\");\n            } else if (error.name === \"SequelizeConnectionRefusedError\") {\n                console.error(\"- Connection refused. Check if the database server is running and the port is correct.\");\n            } else if (error.name === \"SequelizeHostNotFoundError\") {\n                console.error(\"- Host not found. Check if the database host is correct.\");\n            } else if (error.name === \"SequelizeAccessDeniedError\") {\n                console.error(\"- Access denied. Check if the database credentials are correct.\");\n            } else if (error.name === \"SequelizeConnectionTimedOutError\") {\n                console.error(\"- Connection timed out. Check if the database server is responding.\");\n            } else if (error.message && error.message.includes(\"please install pg\")) {\n                console.error(\"- The pg package is not properly loaded. This is likely an issue with the serverless environment.\");\n                console.error(\"- Trying to load pg package explicitly...\");\n                try {\n                    const pg = __webpack_require__(/*! pg */ \"pg\");\n                    console.log(\"- Successfully loaded pg package during error recovery\");\n                } catch (pgError) {\n                    console.error(\"- Failed to load pg package during error recovery:\", pgError);\n                }\n            }\n            if (currentTry >= retries) {\n                console.error(\"â›” Maximum connection attempts reached. Database connection failed.\");\n                // In production, we might want to notify administrators\n                if (false) {}\n                return false;\n            }\n            // Wait before trying again\n            console.log(`â±ï¸ Retrying in ${delay / 1000} seconds...`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    return false;\n};\n// Initialize database with enhanced error handling\nconst initDb = async ()=>{\n    console.log(\"\\uD83D\\uDD04 Initializing database...\");\n    try {\n        // First test the connection with retry logic\n        console.log(\"\\uD83D\\uDD04 Testing database connection...\");\n        const connectionSuccessful = await testConnection();\n        // If connection failed, return false\n        if (!connectionSuccessful) {\n            console.error(\"âŒ Database connection failed after multiple retries\");\n            return false;\n        }\n        // Import models with error handling\n        console.log(\"\\uD83D\\uDD04 Loading database models...\");\n        try {\n            __webpack_require__(/*! ./models/User */ \"(api)/./lib/db/models/User.ts\");\n            console.log(\"âœ… User model loaded successfully\");\n        } catch (userModelError) {\n            console.error(\"âŒ Error loading User model:\", userModelError);\n            return false;\n        }\n        try {\n            __webpack_require__(/*! ./models/Invoice */ \"(api)/./lib/db/models/Invoice.ts\");\n            console.log(\"âœ… Invoice model loaded successfully\");\n        } catch (invoiceModelError) {\n            console.error(\"âŒ Error loading Invoice model:\", invoiceModelError);\n            return false;\n        }\n        // In production, we don't want to alter tables automatically\n        // This should be done through migrations\n        const syncOptions =  true ? {\n            alter: true\n        } : 0;\n        console.log(`ðŸ”„ Synchronizing database with options: ${JSON.stringify(syncOptions)}`);\n        try {\n            await sequelize.sync(syncOptions);\n            console.log(\"âœ… Database synchronized successfully\");\n            return true;\n        } catch (syncError) {\n            console.error(\"âŒ Error synchronizing database:\");\n            console.error(`- Error name: ${syncError.name || \"Unknown\"}`);\n            console.error(`- Error message: ${syncError.message || \"No message\"}`);\n            // Special handling for common sync errors\n            if (syncError.name === \"SequelizeDatabaseError\") {\n                console.error(\"- This is a database error. Check if the tables can be created/altered.\");\n            } else if (syncError.name === \"SequelizeConnectionError\") {\n                console.error(\"- This is a connection error. The connection might have been lost during sync.\");\n            } else if (syncError.message && syncError.message.includes(\"please install pg\")) {\n                console.error(\"- The pg package is not properly loaded. This is likely an issue with the serverless environment.\");\n                console.error(\"- Trying to load pg package explicitly...\");\n                try {\n                    const pg = __webpack_require__(/*! pg */ \"pg\");\n                    console.log(\"- Successfully loaded pg package during error recovery\");\n                } catch (pgError) {\n                    console.error(\"- Failed to load pg package during error recovery:\", pgError);\n                }\n            }\n            // In production, we might want to notify administrators\n            if (false) {}\n            return false;\n        }\n    } catch (error) {\n        console.error(\"âŒ Unexpected error during database initialization:\");\n        console.error(`- Error name: ${error.name || \"Unknown\"}`);\n        console.error(`- Error message: ${error.message || \"No message\"}`);\n        // In production, we might want to notify administrators\n        if (false) {}\n        return false;\n    }\n};\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksSUFBSSxVQUFVLENBQUM7WUFDNUQ5QyxRQUFRRSxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRTJELFVBQVVkLE9BQU8sSUFBSSxhQUFhLENBQUM7WUFFckUsMENBQTBDO1lBQzFDLElBQUljLFVBQVVmLElBQUksS0FBSywwQkFBMEI7Z0JBQy9DOUMsUUFBUUUsS0FBSyxDQUFDO1lBQ2hCLE9BQU8sSUFBSTJELFVBQVVmLElBQUksS0FBSyw0QkFBNEI7Z0JBQ3hEOUMsUUFBUUUsS0FBSyxDQUFDO1lBQ2hCLE9BQU8sSUFBSTJELFVBQVVkLE9BQU8sSUFBSWMsVUFBVWQsT0FBTyxDQUFDQyxRQUFRLENBQUMsc0JBQXNCO2dCQUMvRWhELFFBQVFFLEtBQUssQ0FBQztnQkFDZEYsUUFBUUUsS0FBSyxDQUFDO2dCQUNkLElBQUk7b0JBQ0YsTUFBTUMsS0FBS0osbUJBQU9BLENBQUM7b0JBQ25CQyxRQUFRQyxHQUFHLENBQUM7Z0JBQ2QsRUFBRSxPQUFPZ0QsU0FBUztvQkFDaEJqRCxRQUFRRSxLQUFLLENBQUMsc0RBQXNEK0M7Z0JBQ3RFO1lBQ0Y7WUFFQSx3REFBd0Q7WUFDeEQsSUFBSXpDLEtBQXlCLEVBQWMsRUFHMUM7WUFFRCxPQUFPO1FBQ1Q7SUFDRixFQUFFLE9BQU9OLE9BQVk7UUFDbkJGLFFBQVFFLEtBQUssQ0FBQztRQUNkRixRQUFRRSxLQUFLLENBQUMsQ0FBQyxjQUFjLEVBQUVBLE1BQU00QyxJQUFJLElBQUksVUFBVSxDQUFDO1FBQ3hEOUMsUUFBUUUsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUVBLE1BQU02QyxPQUFPLElBQUksYUFBYSxDQUFDO1FBRWpFLHdEQUF3RDtRQUN4RCxJQUFJdkMsS0FBeUIsRUFBYyxFQUcxQztRQUVELE9BQU87SUFDVDtBQUNGO0FBRTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZWdlbi8uL2xpYi9kYi9kYi50cz8wN2E3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8vIEFkZCBUeXBlU2NyaXB0IGRlY2xhcmF0aW9uIGZvciBnbG9iYWwuX19ub25fd2VicGFja19yZXF1aXJlX19cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgX19ub25fd2VicGFja19yZXF1aXJlX18/OiB0eXBlb2YgcmVxdWlyZTtcbiAgfVxufVxuXG4vLyBFeHRlbmQgdGhlIGdsb2JhbFRoaXMgdHlwZVxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgX19ub25fd2VicGFja19yZXF1aXJlX186IHR5cGVvZiByZXF1aXJlO1xufVxuXG4vLyBFeHBsaWNpdGx5IHJlcXVpcmUgcGcgdG8gZW5zdXJlIGl0J3MgbG9hZGVkXG4vLyBUaGlzIGhlbHBzIHByZXZlbnQgdGhlIFwiUGxlYXNlIGluc3RhbGwgcGcgcGFja2FnZSBtYW51YWxseVwiIGVycm9yIGluIHNlcnZlcmxlc3MgZW52aXJvbm1lbnRzXG5sZXQgcGdMb2FkZWQgPSBmYWxzZTtcblxuLy8gRmlyc3QgYXR0ZW1wdCAtIHN0YW5kYXJkIHJlcXVpcmVcbnRyeSB7XG4gIHJlcXVpcmUoJ3BnJyk7XG4gIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgbG9hZGVkIHBnIHBhY2thZ2UgKHN0YW5kYXJkIHJlcXVpcmUpJyk7XG4gIHBnTG9hZGVkID0gdHJ1ZTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgcGcgcGFja2FnZSAoc3RhbmRhcmQgcmVxdWlyZSk6JywgZXJyb3IpO1xufVxuXG4vLyBTZWNvbmQgYXR0ZW1wdCAtIHVzaW5nIGR5bmFtaWMgaW1wb3J0IGlmIGZpcnN0IGF0dGVtcHQgZmFpbGVkXG5pZiAoIXBnTG9hZGVkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGcgPSByZXF1aXJlKCdwZycpO1xuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgbG9hZGVkIHBnIHBhY2thZ2UgKHZhcmlhYmxlIGFzc2lnbm1lbnQpJyk7XG4gICAgcGdMb2FkZWQgPSB0cnVlO1xuICB9IGNhdGNoIChzZWNvbmRFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgcGcgcGFja2FnZSAodmFyaWFibGUgYXNzaWdubWVudCk6Jywgc2Vjb25kRXJyb3IpO1xuICB9XG59XG5cbi8vIFRoaXJkIGF0dGVtcHQgLSB1c2luZyBwYXRoIHJlc29sdXRpb24gaWYgcHJldmlvdXMgYXR0ZW1wdHMgZmFpbGVkXG5pZiAoIXBnTG9hZGVkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbiAgICBjb25zdCBwZ1BhdGggPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJ25vZGVfbW9kdWxlcy9wZycpO1xuICAgIGNvbnN0IHBnID0gcmVxdWlyZShwZ1BhdGgpO1xuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgbG9hZGVkIHBnIHBhY2thZ2UgKHBhdGggcmVzb2x1dGlvbiknKTtcbiAgICBwZ0xvYWRlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKHRoaXJkRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHBnIHBhY2thZ2UgKHBhdGggcmVzb2x1dGlvbik6JywgdGhpcmRFcnJvcik7XG4gIH1cbn1cblxuLy8gRmluYWwgYXR0ZW1wdCAtIHVzaW5nIGdsb2JhbC5fX25vbl93ZWJwYWNrX3JlcXVpcmVfXyBpZiBhdmFpbGFibGUgKGZvciBOZXh0LmpzKVxuaWYgKCFwZ0xvYWRlZCAmJiB0eXBlb2YgZ2xvYmFsLl9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fID09PSAnZnVuY3Rpb24nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGcgPSBnbG9iYWwuX19ub25fd2VicGFja19yZXF1aXJlX18oJ3BnJyk7XG4gICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBsb2FkZWQgcGcgcGFja2FnZSAobm9uLXdlYnBhY2sgcmVxdWlyZSknKTtcbiAgICBwZ0xvYWRlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGZvdXJ0aEVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBwZyBwYWNrYWdlIChub24td2VicGFjayByZXF1aXJlKTonLCBmb3VydGhFcnJvcik7XG4gIH1cbn1cblxuaWYgKCFwZ0xvYWRlZCkge1xuICBjb25zb2xlLndhcm4oJ+KaoO+4jyBXQVJOSU5HOiBGYWlsZWQgdG8gbG9hZCBwZyBwYWNrYWdlIGFmdGVyIG11bHRpcGxlIGF0dGVtcHRzLiBUaGlzIG1heSBjYXVzZSBpc3N1ZXMgd2l0aCBkYXRhYmFzZSBjb25uZWN0aW9ucy4nKTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBTZXF1ZWxpemUgd2l0aCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmxldCBzZXF1ZWxpemU6IFNlcXVlbGl6ZTtcblxuLy8gSW5pdGlhbGl6ZSBTZXF1ZWxpemUgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbnRyeSB7XG4gIC8vIENoZWNrIGlmIHJ1bm5pbmcgd2l0aCBOZW9uIGRhdGFiYXNlIG9yIFZlcmNlbCBQb3N0Z3Jlc1xuICBpZiAocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8IHByb2Nlc3MuZW52LlBPU1RHUkVTX1VSTCkge1xuICAgIC8vIFByaW9yaXRpemUgTmVvbiBkYXRhYmFzZSBjb25uZWN0aW9uIGlmIGF2YWlsYWJsZVxuICAgIGNvbnN0IGNvbm5lY3Rpb25VcmwgPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfHwgcHJvY2Vzcy5lbnYuUE9TVEdSRVNfVVJMO1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyBOZW9uIGRhdGFiYXNlIGNvbm5lY3Rpb24nKTtcbiAgICBcbiAgICAvLyBMb2cgY29ubmVjdGlvbiBzdHJpbmcgKHdpdGggY3JlZGVudGlhbHMgbWFza2VkKVxuICAgIC8vIFdlIGtub3cgY29ubmVjdGlvblVybCBpcyBkZWZpbmVkIGhlcmUgYmVjYXVzZSBvZiB0aGUgaWYgY29uZGl0aW9uIGFib3ZlXG4gICAgY29uc3QgbWFza2VkVXJsID0gY29ubmVjdGlvblVybCEucmVwbGFjZSgvOlxcL1xcLyhbXjpdKyk6KFteQF0rKUAvLCAnOi8vJDE6KioqKkAnKTtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBVUkwgKG1hc2tlZCk6JywgbWFza2VkVXJsKTtcbiAgICBcbiAgICAvLyBVc2UgdGhlIE5lb24gZGF0YWJhc2UgY29ubmVjdGlvbiBzdHJpbmdcbiAgICBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbm5lY3Rpb25VcmwhLCB7XG4gICAgICBkaWFsZWN0OiAncG9zdGdyZXMnLFxuICAgICAgbG9nZ2luZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IGZhbHNlLFxuICAgICAgZGlhbGVjdE9wdGlvbnM6IHtcbiAgICAgICAgc3NsOiB7XG4gICAgICAgICAgcmVxdWlyZTogdHJ1ZSxcbiAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIC8vIEFkZCBxdWVyeSB0aW1lb3V0IGZvciBOZW9uIGRhdGFiYXNlICgzMCBzZWNvbmRzKVxuICAgICAgICAvLyBUaGlzIGhlbHBzIHByZXZlbnQgbG9uZy1ydW5uaW5nIHF1ZXJpZXMgZnJvbSBjYXVzaW5nIGlzc3VlcyBpbiBzZXJ2ZXJsZXNzIGVudmlyb25tZW50c1xuICAgICAgICBzdGF0ZW1lbnRfdGltZW91dDogMzAwMDBcbiAgICAgIH0sXG4gICAgICAvLyBBZGQgcmV0cnkgbG9naWMgZm9yIGNvbm5lY3Rpb25cbiAgICAgIHBvb2w6IHtcbiAgICAgICAgbWF4OiA1LFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIGFjcXVpcmU6IDMwMDAwLFxuICAgICAgICBpZGxlOiAxMDAwMFxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB3ZSBzaG91bGQgYmUgdXNpbmcgVmVyY2VsIFBvc3RncmVzXG4gICAgY29uc29sZS5lcnJvcign4pqg77iPIENSSVRJQ0FMOiBQT1NUR1JFU19VUkwgaXMgbm90IHNldCBpbiBwcm9kdWN0aW9uIGVudmlyb25tZW50Jyk7XG4gICAgY29uc29sZS5lcnJvcignUGxlYXNlIHNldCB1cCBWZXJjZWwgUG9zdGdyZXMgZm9yIHlvdXIgcHJvamVjdDonKTtcbiAgICBjb25zb2xlLmVycm9yKCcxLiBHbyB0byB0aGUgVmVyY2VsIGRhc2hib2FyZCcpO1xuICAgIGNvbnNvbGUuZXJyb3IoJzIuIFNlbGVjdCB5b3VyIHByb2plY3QnKTtcbiAgICBjb25zb2xlLmVycm9yKCczLiBHbyB0byBTdG9yYWdlIHRhYicpO1xuICAgIGNvbnNvbGUuZXJyb3IoJzQuIENyZWF0ZSBhIG5ldyBQb3N0Z3JlcyBkYXRhYmFzZScpO1xuICAgIGNvbnNvbGUuZXJyb3IoJzUuIENvbm5lY3QgaXQgdG8geW91ciBwcm9qZWN0Jyk7XG4gICAgXG4gICAgLy8gU3RpbGwgY3JlYXRlIGEgU2VxdWVsaXplIGluc3RhbmNlIHdpdGggbG9jYWwgcGFyYW1ldGVycyBhcyBmYWxsYmFjayxcbiAgICAvLyBidXQgdGhpcyB3aWxsIGxpa2VseSBmYWlsIGluIHByb2R1Y3Rpb24gd2l0aG91dCBhIGxvY2FsIFBvc3RncmVTUUwgc2VydmVyXG4gICAgY29uc29sZS5sb2coJ0ZhbGxpbmcgYmFjayB0byBsb2NhbCBQb3N0Z3JlU1FMIGNvbm5lY3Rpb24gKHRoaXMgd2lsbCBsaWtlbHkgZmFpbCBpbiBwcm9kdWN0aW9uKScpO1xuICAgIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoXG4gICAgICBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdpbnZvaWNlZ2VuJyxcbiAgICAgIHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgJ3Bvc3RncmVzJyxcbiAgICAgIHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdwb3N0Z3JlcycsXG4gICAgICB7XG4gICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXG4gICAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgJzU0MzInKSxcbiAgICAgICAgZGlhbGVjdDogJ3Bvc3RncmVzJyxcbiAgICAgICAgbG9nZ2luZzogdHJ1ZSwgLy8gQWx3YXlzIGxvZyBpbiB0aGlzIGVycm9yIGNhc2VcbiAgICAgICAgZGlhbGVjdE9wdGlvbnM6IHtcbiAgICAgICAgICBzc2w6IHtcbiAgICAgICAgICAgIHJlcXVpcmU6IHRydWUsXG4gICAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICAvLyBBZGQgcXVlcnkgdGltZW91dCAoMzAgc2Vjb25kcylcbiAgICAgICAgICBzdGF0ZW1lbnRfdGltZW91dDogMzAwMDBcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQWRkIHJldHJ5IGxvZ2ljIGZvciBjb25uZWN0aW9uXG4gICAgICAgIHBvb2w6IHtcbiAgICAgICAgICBtYXg6IDUsXG4gICAgICAgICAgbWluOiAwLFxuICAgICAgICAgIGFjcXVpcmU6IDMwMDAwLFxuICAgICAgICAgIGlkbGU6IDEwMDAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIC8vIFVzZSB0cmFkaXRpb25hbCBjb25uZWN0aW9uIHBhcmFtZXRlcnMgZm9yIGxvY2FsIGRldmVsb3BtZW50XG4gICAgY29uc29sZS5sb2coJ1VzaW5nIGxvY2FsIFBvc3RncmVTUUwgY29ubmVjdGlvbicpO1xuICAgIHNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoXG4gICAgICBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdpbnZvaWNlZ2VuJyxcbiAgICAgIHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgJ3Bvc3RncmVzJyxcbiAgICAgIHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICdwb3N0Z3JlcycsXG4gICAgICB7XG4gICAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgJ2xvY2FsaG9zdCcsXG4gICAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgJzU0MzInKSxcbiAgICAgICAgZGlhbGVjdDogJ3Bvc3RncmVzJyxcbiAgICAgICAgbG9nZ2luZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBjb25zb2xlLmxvZyA6IGZhbHNlLFxuICAgICAgICBkaWFsZWN0T3B0aW9uczoge1xuICAgICAgICAgIHNzbDogZmFsc2UsXG4gICAgICAgICAgLy8gQWRkIHF1ZXJ5IHRpbWVvdXQgZm9yIGxvY2FsIGRldmVsb3BtZW50ICgzMCBzZWNvbmRzKVxuICAgICAgICAgIC8vIFRoaXMgaGVscHMgbWFpbnRhaW4gY29uc2lzdGVudCBiZWhhdmlvciB3aXRoIHByb2R1Y3Rpb25cbiAgICAgICAgICBzdGF0ZW1lbnRfdGltZW91dDogMzAwMDBcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQWRkIHJldHJ5IGxvZ2ljIGZvciBjb25uZWN0aW9uXG4gICAgICAgIHBvb2w6IHtcbiAgICAgICAgICBtYXg6IDUsXG4gICAgICAgICAgbWluOiAwLFxuICAgICAgICAgIGFjcXVpcmU6IDMwMDAwLFxuICAgICAgICAgIGlkbGU6IDEwMDAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygnU2VxdWVsaXplIGluc3RhbmNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgU2VxdWVsaXplOicsIGVycm9yKTtcbn1cblxuLy8gVGVzdCB0aGUgY29ubmVjdGlvbiB3aXRoIHJldHJ5IGxvZ2ljIGFuZCBlbmhhbmNlZCBlcnJvciByZXBvcnRpbmdcbmNvbnN0IHRlc3RDb25uZWN0aW9uID0gYXN5bmMgKHJldHJpZXMgPSA1LCBkZWxheSA9IDUwMDApID0+IHtcbiAgbGV0IGN1cnJlbnRUcnkgPSAwO1xuICBcbiAgLy8gTG9nIGNvbm5lY3Rpb24gYXR0ZW1wdCB3aXRoIGVudmlyb25tZW50IGluZm9cbiAgY29uc29sZS5sb2coJ1Rlc3RpbmcgZGF0YWJhc2UgY29ubmVjdGlvbiB3aXRoIHRoZSBmb2xsb3dpbmcgY29uZmlndXJhdGlvbjonKTtcbiAgY29uc29sZS5sb2coJy0gRW52aXJvbm1lbnQ6JywgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50Jyk7XG4gIGNvbnNvbGUubG9nKCctIFVzaW5nIE5lb24gRGF0YWJhc2U6JywgISFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpO1xuICBjb25zb2xlLmxvZygnLSBVc2luZyBWZXJjZWwgUG9zdGdyZXM6JywgISFwcm9jZXNzLmVudi5QT1NUR1JFU19VUkwgJiYgIXByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCk7XG4gIGNvbnNvbGUubG9nKCctIERpYWxlY3Q6JywgJ3Bvc3RncmVzJyk7XG4gIFxuICB3aGlsZSAoY3VycmVudFRyeSA8IHJldHJpZXMpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBjb25uZWN0aW9uIGhhcyBiZWVuIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseS4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGN1cnJlbnRUcnkrKztcbiAgICAgIFxuICAgICAgLy8gRW5oYW5jZWQgZXJyb3IgbG9nZ2luZyB3aXRoIG1vcmUgZGV0YWlsc1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIFVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZSAoYXR0ZW1wdCAke2N1cnJlbnRUcnl9LyR7cmV0cmllc30pOmApO1xuICAgICAgY29uc29sZS5lcnJvcihgLSBFcnJvciBuYW1lOiAke2Vycm9yLm5hbWUgfHwgJ1Vua25vd24nfWApO1xuICAgICAgY29uc29sZS5lcnJvcihgLSBFcnJvciBtZXNzYWdlOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ05vIG1lc3NhZ2UnfWApO1xuICAgICAgXG4gICAgICAvLyBMb2cgc3BlY2lmaWMgZGV0YWlscyBmb3IgY29tbW9uIGVycm9yc1xuICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdTZXF1ZWxpemVDb25uZWN0aW9uRXJyb3InKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJy0gVGhpcyBpcyBhIGNvbm5lY3Rpb24gZXJyb3IuIENoZWNrIGlmIHRoZSBkYXRhYmFzZSBzZXJ2ZXIgaXMgcnVubmluZyBhbmQgYWNjZXNzaWJsZS4nKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZUNvbm5lY3Rpb25SZWZ1c2VkRXJyb3InKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJy0gQ29ubmVjdGlvbiByZWZ1c2VkLiBDaGVjayBpZiB0aGUgZGF0YWJhc2Ugc2VydmVyIGlzIHJ1bm5pbmcgYW5kIHRoZSBwb3J0IGlzIGNvcnJlY3QuJyk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdTZXF1ZWxpemVIb3N0Tm90Rm91bmRFcnJvcicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignLSBIb3N0IG5vdCBmb3VuZC4gQ2hlY2sgaWYgdGhlIGRhdGFiYXNlIGhvc3QgaXMgY29ycmVjdC4nKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZUFjY2Vzc0RlbmllZEVycm9yJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCctIEFjY2VzcyBkZW5pZWQuIENoZWNrIGlmIHRoZSBkYXRhYmFzZSBjcmVkZW50aWFscyBhcmUgY29ycmVjdC4nKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZUNvbm5lY3Rpb25UaW1lZE91dEVycm9yJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCctIENvbm5lY3Rpb24gdGltZWQgb3V0LiBDaGVjayBpZiB0aGUgZGF0YWJhc2Ugc2VydmVyIGlzIHJlc3BvbmRpbmcuJyk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygncGxlYXNlIGluc3RhbGwgcGcnKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCctIFRoZSBwZyBwYWNrYWdlIGlzIG5vdCBwcm9wZXJseSBsb2FkZWQuIFRoaXMgaXMgbGlrZWx5IGFuIGlzc3VlIHdpdGggdGhlIHNlcnZlcmxlc3MgZW52aXJvbm1lbnQuJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJy0gVHJ5aW5nIHRvIGxvYWQgcGcgcGFja2FnZSBleHBsaWNpdGx5Li4uJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGcgPSByZXF1aXJlKCdwZycpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCctIFN1Y2Nlc3NmdWxseSBsb2FkZWQgcGcgcGFja2FnZSBkdXJpbmcgZXJyb3IgcmVjb3ZlcnknKTtcbiAgICAgICAgfSBjYXRjaCAocGdFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJy0gRmFpbGVkIHRvIGxvYWQgcGcgcGFja2FnZSBkdXJpbmcgZXJyb3IgcmVjb3Zlcnk6JywgcGdFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGN1cnJlbnRUcnkgPj0gcmV0cmllcykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfim5QgTWF4aW11bSBjb25uZWN0aW9uIGF0dGVtcHRzIHJlYWNoZWQuIERhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgd2UgbWlnaHQgd2FudCB0byBub3RpZnkgYWRtaW5pc3RyYXRvcnNcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAvLyBIZXJlIHlvdSBjb3VsZCBpbnRlZ3JhdGUgd2l0aCBhbiBlcnJvciByZXBvcnRpbmcgc2VydmljZSBsaWtlIFNlbnRyeVxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyBDUklUSUNBTDogRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQgaW4gcHJvZHVjdGlvbiBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFdhaXQgYmVmb3JlIHRyeWluZyBhZ2FpblxuICAgICAgY29uc29sZS5sb2coYOKPse+4jyBSZXRyeWluZyBpbiAke2RlbGF5LzEwMDB9IHNlY29uZHMuLi5gKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSB3aXRoIGVuaGFuY2VkIGVycm9yIGhhbmRsaW5nXG5jb25zdCBpbml0RGIgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn5SEIEluaXRpYWxpemluZyBkYXRhYmFzZS4uLicpO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCB0ZXN0IHRoZSBjb25uZWN0aW9uIHdpdGggcmV0cnkgbG9naWNcbiAgICBjb25zb2xlLmxvZygn8J+UhCBUZXN0aW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi4nKTtcbiAgICBjb25zdCBjb25uZWN0aW9uU3VjY2Vzc2Z1bCA9IGF3YWl0IHRlc3RDb25uZWN0aW9uKCk7XG4gICAgXG4gICAgLy8gSWYgY29ubmVjdGlvbiBmYWlsZWQsIHJldHVybiBmYWxzZVxuICAgIGlmICghY29ubmVjdGlvblN1Y2Nlc3NmdWwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCBhZnRlciBtdWx0aXBsZSByZXRyaWVzJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIEltcG9ydCBtb2RlbHMgd2l0aCBlcnJvciBoYW5kbGluZ1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIExvYWRpbmcgZGF0YWJhc2UgbW9kZWxzLi4uJyk7XG4gICAgdHJ5IHtcbiAgICAgIHJlcXVpcmUoJy4vbW9kZWxzL1VzZXInKTtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVXNlciBtb2RlbCBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAodXNlck1vZGVsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBsb2FkaW5nIFVzZXIgbW9kZWw6JywgdXNlck1vZGVsRXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgcmVxdWlyZSgnLi9tb2RlbHMvSW52b2ljZScpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBJbnZvaWNlIG1vZGVsIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChpbnZvaWNlTW9kZWxFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGxvYWRpbmcgSW52b2ljZSBtb2RlbDonLCBpbnZvaWNlTW9kZWxFcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHdlIGRvbid0IHdhbnQgdG8gYWx0ZXIgdGFibGVzIGF1dG9tYXRpY2FsbHlcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBkb25lIHRocm91Z2ggbWlncmF0aW9uc1xuICAgIGNvbnN0IHN5bmNPcHRpb25zID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgXG4gICAgICA/IHsgYWx0ZXI6IHRydWUgfVxuICAgICAgOiB7IGFsdGVyOiBmYWxzZSB9O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5SEIFN5bmNocm9uaXppbmcgZGF0YWJhc2Ugd2l0aCBvcHRpb25zOiAke0pTT04uc3RyaW5naWZ5KHN5bmNPcHRpb25zKX1gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VxdWVsaXplLnN5bmMoc3luY09wdGlvbnMpO1xuICAgICAgY29uc29sZS5sb2coJ+KchSBEYXRhYmFzZSBzeW5jaHJvbml6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChzeW5jRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHN5bmNocm9uaXppbmcgZGF0YWJhc2U6Jyk7XG4gICAgICBjb25zb2xlLmVycm9yKGAtIEVycm9yIG5hbWU6ICR7c3luY0Vycm9yLm5hbWUgfHwgJ1Vua25vd24nfWApO1xuICAgICAgY29uc29sZS5lcnJvcihgLSBFcnJvciBtZXNzYWdlOiAke3N5bmNFcnJvci5tZXNzYWdlIHx8ICdObyBtZXNzYWdlJ31gKTtcbiAgICAgIFxuICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgY29tbW9uIHN5bmMgZXJyb3JzXG4gICAgICBpZiAoc3luY0Vycm9yLm5hbWUgPT09ICdTZXF1ZWxpemVEYXRhYmFzZUVycm9yJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCctIFRoaXMgaXMgYSBkYXRhYmFzZSBlcnJvci4gQ2hlY2sgaWYgdGhlIHRhYmxlcyBjYW4gYmUgY3JlYXRlZC9hbHRlcmVkLicpO1xuICAgICAgfSBlbHNlIGlmIChzeW5jRXJyb3IubmFtZSA9PT0gJ1NlcXVlbGl6ZUNvbm5lY3Rpb25FcnJvcicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignLSBUaGlzIGlzIGEgY29ubmVjdGlvbiBlcnJvci4gVGhlIGNvbm5lY3Rpb24gbWlnaHQgaGF2ZSBiZWVuIGxvc3QgZHVyaW5nIHN5bmMuJyk7XG4gICAgICB9IGVsc2UgaWYgKHN5bmNFcnJvci5tZXNzYWdlICYmIHN5bmNFcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdwbGVhc2UgaW5zdGFsbCBwZycpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJy0gVGhlIHBnIHBhY2thZ2UgaXMgbm90IHByb3Blcmx5IGxvYWRlZC4gVGhpcyBpcyBsaWtlbHkgYW4gaXNzdWUgd2l0aCB0aGUgc2VydmVybGVzcyBlbnZpcm9ubWVudC4nKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignLSBUcnlpbmcgdG8gbG9hZCBwZyBwYWNrYWdlIGV4cGxpY2l0bHkuLi4nKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwZyA9IHJlcXVpcmUoJ3BnJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJy0gU3VjY2Vzc2Z1bGx5IGxvYWRlZCBwZyBwYWNrYWdlIGR1cmluZyBlcnJvciByZWNvdmVyeScpO1xuICAgICAgICB9IGNhdGNoIChwZ0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignLSBGYWlsZWQgdG8gbG9hZCBwZyBwYWNrYWdlIGR1cmluZyBlcnJvciByZWNvdmVyeTonLCBwZ0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbiBwcm9kdWN0aW9uLCB3ZSBtaWdodCB3YW50IHRvIG5vdGlmeSBhZG1pbmlzdHJhdG9yc1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgLy8gSGVyZSB5b3UgY291bGQgaW50ZWdyYXRlIHdpdGggYW4gZXJyb3IgcmVwb3J0aW5nIHNlcnZpY2UgbGlrZSBTZW50cnlcbiAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPIENSSVRJQ0FMOiBEYXRhYmFzZSBzeW5jaHJvbml6YXRpb24gZmFpbGVkIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBVbmV4cGVjdGVkIGVycm9yIGR1cmluZyBkYXRhYmFzZSBpbml0aWFsaXphdGlvbjonKTtcbiAgICBjb25zb2xlLmVycm9yKGAtIEVycm9yIG5hbWU6ICR7ZXJyb3IubmFtZSB8fCAnVW5rbm93bid9YCk7XG4gICAgY29uc29sZS5lcnJvcihgLSBFcnJvciBtZXNzYWdlOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ05vIG1lc3NhZ2UnfWApO1xuICAgIFxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHdlIG1pZ2h0IHdhbnQgdG8gbm90aWZ5IGFkbWluaXN0cmF0b3JzXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIEhlcmUgeW91IGNvdWxkIGludGVncmF0ZSB3aXRoIGFuIGVycm9yIHJlcG9ydGluZyBzZXJ2aWNlIGxpa2UgU2VudHJ5XG4gICAgICBjb25zb2xlLmVycm9yKCfimqDvuI8gQ1JJVElDQUw6IFVuZXhwZWN0ZWQgZXJyb3IgZHVyaW5nIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgeyBzZXF1ZWxpemUsIHRlc3RDb25uZWN0aW9uLCBpbml0RGIgfTsiXSwibmFtZXMiOlsiU2VxdWVsaXplIiwicGdMb2FkZWQiLCJyZXF1aXJlIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwicGciLCJzZWNvbmRFcnJvciIsInBhdGgiLCJwZ1BhdGgiLCJyZXNvbHZlIiwicHJvY2VzcyIsImN3ZCIsInRoaXJkRXJyb3IiLCJnbG9iYWwiLCJfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyIsImZvdXJ0aEVycm9yIiwid2FybiIsInNlcXVlbGl6ZSIsImVudiIsIkRBVEFCQVNFX1VSTCIsIlBPU1RHUkVTX1VSTCIsImNvbm5lY3Rpb25VcmwiLCJtYXNrZWRVcmwiLCJyZXBsYWNlIiwiZGlhbGVjdCIsImxvZ2dpbmciLCJkaWFsZWN0T3B0aW9ucyIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsInN0YXRlbWVudF90aW1lb3V0IiwicG9vbCIsIm1heCIsIm1pbiIsImFjcXVpcmUiLCJpZGxlIiwiREJfTkFNRSIsIkRCX1VTRVIiLCJEQl9QQVNTV09SRCIsImhvc3QiLCJEQl9IT1NUIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsInRlc3RDb25uZWN0aW9uIiwicmV0cmllcyIsImRlbGF5IiwiY3VycmVudFRyeSIsImF1dGhlbnRpY2F0ZSIsIm5hbWUiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJwZ0Vycm9yIiwiUHJvbWlzZSIsInNldFRpbWVvdXQiLCJpbml0RGIiLCJjb25uZWN0aW9uU3VjY2Vzc2Z1bCIsInVzZXJNb2RlbEVycm9yIiwiaW52b2ljZU1vZGVsRXJyb3IiLCJzeW5jT3B0aW9ucyIsImFsdGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInN5bmMiLCJzeW5jRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/db/db.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/Invoice.ts":
/*!**********************************!*\
  !*** ./lib/db/models/Invoice.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db */ \"(api)/./lib/db/db.ts\");\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./User */ \"(api)/./lib/db/models/User.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_1__, _User__WEBPACK_IMPORTED_MODULE_2__]);\n([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_1__, _User__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst Invoice = _db__WEBPACK_IMPORTED_MODULE_1__.sequelize.define(\"Invoice\", {\n    id: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUIDV4,\n        primaryKey: true\n    },\n    invoiceNumber: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    invoiceDate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATEONLY,\n        allowNull: false,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.NOW\n    },\n    dueDate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.DATEONLY,\n        allowNull: true\n    },\n    logoUrl: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    sender: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: {\n            name: \"\",\n            address: \"\",\n            city: \"\",\n            postalCode: \"\",\n            country: \"\"\n        }\n    },\n    recipient: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: {\n            name: \"\",\n            address: \"\",\n            city: \"\",\n            postalCode: \"\",\n            country: \"\"\n        }\n    },\n    items: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        allowNull: false,\n        defaultValue: []\n    },\n    currency: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false,\n        defaultValue: \"USD\"\n    },\n    taxRate: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    subtotal: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    total: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.FLOAT,\n        allowNull: false,\n        defaultValue: 0\n    },\n    UserId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        allowNull: false,\n        references: {\n            model: \"Users\",\n            key: \"id\"\n        }\n    }\n}, {\n    timestamps: true,\n    hooks: {\n        beforeCreate: (invoice)=>{\n            // Calculate subtotal and total before saving\n            const subtotal = invoice.items.reduce((sum, item)=>sum + item.quantity * item.unitPrice, 0);\n            const taxAmount = subtotal * (invoice.taxRate / 100);\n            invoice.subtotal = subtotal;\n            invoice.total = subtotal + taxAmount;\n        },\n        beforeUpdate: (invoice)=>{\n            // Recalculate if items or tax rate changed\n            if (invoice.changed(\"items\") || invoice.changed(\"taxRate\")) {\n                const subtotal = invoice.items.reduce((sum, item)=>sum + item.quantity * item.unitPrice, 0);\n                const taxAmount = subtotal * (invoice.taxRate / 100);\n                invoice.subtotal = subtotal;\n                invoice.total = subtotal + taxAmount;\n            }\n        }\n    }\n});\n// Define association\n_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].hasMany(Invoice);\nInvoice.belongsTo(_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Invoice);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzdCO1FBQ0Y7SUFDRjtBQUNGO0FBR0YscUJBQXFCO0FBQ3JCNUMscURBQVksQ0FBQ0M7QUFDYkEsUUFBUStDLFNBQVMsQ0FBQ2hELDZDQUFJQTtBQUV0QixpRUFBZUMsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2VnZW4vLi9saWIvZGIvbW9kZWxzL0ludm9pY2UudHM/ZmRlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhVHlwZXMsIE1vZGVsLCBPcHRpb25hbCB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgeyBzZXF1ZWxpemUgfSBmcm9tICcuLi9kYic7XG5pbXBvcnQgVXNlciBmcm9tICcuL1VzZXInO1xuXG4vLyBEZWZpbmUgSW52b2ljZSBJdGVtIGludGVyZmFjZVxuaW50ZXJmYWNlIEludm9pY2VJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcXVhbnRpdHk6IG51bWJlcjtcbiAgdW5pdFByaWNlOiBudW1iZXI7XG59XG5cbi8vIERlZmluZSBJbnZvaWNlIGF0dHJpYnV0ZXNcbmludGVyZmFjZSBJbnZvaWNlQXR0cmlidXRlcyB7XG4gIGlkOiBzdHJpbmc7XG4gIGludm9pY2VOdW1iZXI6IHN0cmluZztcbiAgaW52b2ljZURhdGU6IERhdGU7XG4gIGR1ZURhdGU/OiBEYXRlO1xuICBsb2dvVXJsPzogc3RyaW5nO1xuICBzZW5kZXI6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogc3RyaW5nO1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuICByZWNpcGllbnQ6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogc3RyaW5nO1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICB9O1xuICBpdGVtczogSW52b2ljZUl0ZW1bXTtcbiAgY3VycmVuY3k6IHN0cmluZztcbiAgdGF4UmF0ZTogbnVtYmVyO1xuICBzdWJ0b3RhbDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xuICBVc2VySWQ6IHN0cmluZztcbiAgY3JlYXRlZEF0PzogRGF0ZTtcbiAgdXBkYXRlZEF0PzogRGF0ZTtcbn1cblxuLy8gRGVmaW5lIG9wdGlvbmFsIGF0dHJpYnV0ZXMgZm9yIEludm9pY2UgY3JlYXRpb25cbmludGVyZmFjZSBJbnZvaWNlQ3JlYXRpb25BdHRyaWJ1dGVzIGV4dGVuZHMgT3B0aW9uYWw8SW52b2ljZUF0dHJpYnV0ZXMsICdpZCcgfCAnaW52b2ljZU51bWJlcicgfCAnc3VidG90YWwnIHwgJ3RvdGFsJz4ge31cblxuLy8gRGVmaW5lIEludm9pY2UgbW9kZWxcbmludGVyZmFjZSBJbnZvaWNlSW5zdGFuY2UgZXh0ZW5kcyBNb2RlbDxJbnZvaWNlQXR0cmlidXRlcywgSW52b2ljZUNyZWF0aW9uQXR0cmlidXRlcz4sIEludm9pY2VBdHRyaWJ1dGVzIHt9XG5cbmNvbnN0IEludm9pY2UgPSBzZXF1ZWxpemUuZGVmaW5lPEludm9pY2VJbnN0YW5jZT4oXG4gICdJbnZvaWNlJyxcbiAge1xuICAgIGlkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuVVVJRCxcbiAgICAgIGRlZmF1bHRWYWx1ZTogRGF0YVR5cGVzLlVVSURWNCxcbiAgICAgIHByaW1hcnlLZXk6IHRydWVcbiAgICB9LFxuICAgIGludm9pY2VOdW1iZXI6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGludm9pY2VEYXRlOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuREFURU9OTFksXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuTk9XXG4gICAgfSxcbiAgICBkdWVEYXRlOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuREFURU9OTFksXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGxvZ29Vcmw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIHNlbmRlcjoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgIGNpdHk6ICcnLFxuICAgICAgICBwb3N0YWxDb2RlOiAnJyxcbiAgICAgICAgY291bnRyeTogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlY2lwaWVudDoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZToge1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgYWRkcmVzczogJycsXG4gICAgICAgIGNpdHk6ICcnLFxuICAgICAgICBwb3N0YWxDb2RlOiAnJyxcbiAgICAgICAgY291bnRyeTogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIGl0ZW1zOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuSlNPTkIsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBbXVxuICAgIH0sXG4gICAgY3VycmVuY3k6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiAnVVNEJ1xuICAgIH0sXG4gICAgdGF4UmF0ZToge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkZMT0FULFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogMFxuICAgIH0sXG4gICAgc3VidG90YWw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5GTE9BVCxcbiAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgICBkZWZhdWx0VmFsdWU6IDBcbiAgICB9LFxuICAgIHRvdGFsOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuRkxPQVQsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBVc2VySWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICAgIHJlZmVyZW5jZXM6IHtcbiAgICAgICAgbW9kZWw6ICdVc2VycycsXG4gICAgICAgIGtleTogJ2lkJ1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgaG9va3M6IHtcbiAgICAgIGJlZm9yZUNyZWF0ZTogKGludm9pY2U6IEludm9pY2VJbnN0YW5jZSkgPT4ge1xuICAgICAgICAvLyBDYWxjdWxhdGUgc3VidG90YWwgYW5kIHRvdGFsIGJlZm9yZSBzYXZpbmdcbiAgICAgICAgY29uc3Qgc3VidG90YWwgPSBpbnZvaWNlLml0ZW1zLnJlZHVjZShcbiAgICAgICAgICAoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5xdWFudGl0eSAqIGl0ZW0udW5pdFByaWNlKSxcbiAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRheEFtb3VudCA9IHN1YnRvdGFsICogKGludm9pY2UudGF4UmF0ZSAvIDEwMCk7XG4gICAgICAgIFxuICAgICAgICBpbnZvaWNlLnN1YnRvdGFsID0gc3VidG90YWw7XG4gICAgICAgIGludm9pY2UudG90YWwgPSBzdWJ0b3RhbCArIHRheEFtb3VudDtcbiAgICAgIH0sXG4gICAgICBiZWZvcmVVcGRhdGU6IChpbnZvaWNlOiBJbnZvaWNlSW5zdGFuY2UpID0+IHtcbiAgICAgICAgLy8gUmVjYWxjdWxhdGUgaWYgaXRlbXMgb3IgdGF4IHJhdGUgY2hhbmdlZFxuICAgICAgICBpZiAoaW52b2ljZS5jaGFuZ2VkKCdpdGVtcycpIHx8IGludm9pY2UuY2hhbmdlZCgndGF4UmF0ZScpKSB7XG4gICAgICAgICAgY29uc3Qgc3VidG90YWwgPSBpbnZvaWNlLml0ZW1zLnJlZHVjZShcbiAgICAgICAgICAgIChzdW0sIGl0ZW0pID0+IHN1bSArIChpdGVtLnF1YW50aXR5ICogaXRlbS51bml0UHJpY2UpLFxuICAgICAgICAgICAgMFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgdGF4QW1vdW50ID0gc3VidG90YWwgKiAoaW52b2ljZS50YXhSYXRlIC8gMTAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpbnZvaWNlLnN1YnRvdGFsID0gc3VidG90YWw7XG4gICAgICAgICAgaW52b2ljZS50b3RhbCA9IHN1YnRvdGFsICsgdGF4QW1vdW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4pO1xuXG4vLyBEZWZpbmUgYXNzb2NpYXRpb25cblVzZXIuaGFzTWFueShJbnZvaWNlKTtcbkludm9pY2UuYmVsb25nc1RvKFVzZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBJbnZvaWNlOyJdLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJzZXF1ZWxpemUiLCJVc2VyIiwiSW52b2ljZSIsImRlZmluZSIsImlkIiwidHlwZSIsIlVVSUQiLCJkZWZhdWx0VmFsdWUiLCJVVUlEVjQiLCJwcmltYXJ5S2V5IiwiaW52b2ljZU51bWJlciIsIlNUUklORyIsImFsbG93TnVsbCIsImludm9pY2VEYXRlIiwiREFURU9OTFkiLCJOT1ciLCJkdWVEYXRlIiwibG9nb1VybCIsInNlbmRlciIsIkpTT05CIiwibmFtZSIsImFkZHJlc3MiLCJjaXR5IiwicG9zdGFsQ29kZSIsImNvdW50cnkiLCJyZWNpcGllbnQiLCJpdGVtcyIsImN1cnJlbmN5IiwidGF4UmF0ZSIsIkZMT0FUIiwic3VidG90YWwiLCJ0b3RhbCIsIlVzZXJJZCIsInJlZmVyZW5jZXMiLCJtb2RlbCIsImtleSIsInRpbWVzdGFtcHMiLCJob29rcyIsImJlZm9yZUNyZWF0ZSIsImludm9pY2UiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwicXVhbnRpdHkiLCJ1bml0UHJpY2UiLCJ0YXhBbW91bnQiLCJiZWZvcmVVcGRhdGUiLCJjaGFuZ2VkIiwiaGFzTWFueSIsImJlbG9uZ3NUbyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/Invoice.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/User.ts":
/*!*******************************!*\
  !*** ./lib/db/models/User.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var sequelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sequelize */ \"sequelize\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db */ \"(api)/./lib/db/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_2__]);\n([sequelize__WEBPACK_IMPORTED_MODULE_0__, _db__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst User = _db__WEBPACK_IMPORTED_MODULE_2__.sequelize.define(\"User\", {\n    id: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUID,\n        defaultValue: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.UUIDV4,\n        primaryKey: true\n    },\n    email: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: false,\n        unique: true,\n        validate: {\n            isEmail: true\n        }\n    },\n    password: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    emailVerified: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.BOOLEAN,\n        defaultValue: false\n    },\n    name: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    image: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true\n    },\n    googleId: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.STRING,\n        allowNull: true,\n        unique: true\n    },\n    settings: {\n        type: sequelize__WEBPACK_IMPORTED_MODULE_0__.DataTypes.JSONB,\n        defaultValue: {\n            sender: {\n                name: \"\",\n                address: \"\",\n                city: \"\",\n                postalCode: \"\",\n                country: \"\"\n            },\n            logoUrl: \"\"\n        }\n    }\n}, {\n    timestamps: true,\n    hooks: {\n        beforeCreate: async (user)=>{\n            if (user.password) {\n                const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n                const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(user.password, salt);\n                user.password = hashedPassword;\n            }\n        },\n        beforeUpdate: async (user)=>{\n            if (user.changed(\"password\") && user.password) {\n                const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n                const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(user.password, salt);\n                user.password = hashedPassword;\n            }\n        }\n    }\n});\n// Instance method to compare password\nUser.prototype.comparePassword = async function(candidatePassword) {\n    // If user has no password (e.g., Google auth user), return false\n    if (!this.password) {\n        return false;\n    }\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(candidatePassword, this.password);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (User);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIvbW9kZWxzL1VzZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDekI7QUFDSTtBQWlDbEMsTUFBTUcsT0FBT0QsMENBQVNBLENBQUNFLE1BQU0sQ0FDM0IsUUFDQTtJQUNFQyxJQUFJO1FBQ0ZDLE1BQU1OLGdEQUFTQSxDQUFDTyxJQUFJO1FBQ3BCQyxjQUFjUixnREFBU0EsQ0FBQ1MsTUFBTTtRQUM5QkMsWUFBWTtJQUNkO0lBQ0FDLE9BQU87UUFDTEwsTUFBTU4sZ0RBQVNBLENBQUNZLE1BQU07UUFDdEJDLFdBQVc7UUFDWEMsUUFBUTtRQUNSQyxVQUFVO1lBQ1JDLFNBQVM7UUFDWDtJQUNGO0lBQ0FDLFVBQVU7UUFDUlgsTUFBTU4sZ0RBQVNBLENBQUNZLE1BQU07UUFDdEJDLFdBQVc7SUFDYjtJQUNBSyxlQUFlO1FBQ2JaLE1BQU1OLGdEQUFTQSxDQUFDbUIsT0FBTztRQUN2QlgsY0FBYztJQUNoQjtJQUNBWSxNQUFNO1FBQ0pkLE1BQU1OLGdEQUFTQSxDQUFDWSxNQUFNO1FBQ3RCQyxXQUFXO0lBQ2I7SUFDQVEsT0FBTztRQUNMZixNQUFNTixnREFBU0EsQ0FBQ1ksTUFBTTtRQUN0QkMsV0FBVztJQUNiO0lBQ0FTLFVBQVU7UUFDUmhCLE1BQU1OLGdEQUFTQSxDQUFDWSxNQUFNO1FBQ3RCQyxXQUFXO1FBQ1hDLFFBQVE7SUFDVjtJQUNBUyxVQUFVO1FBQ1JqQixNQUFNTixnREFBU0EsQ0FBQ3dCLEtBQUs7UUFDckJoQixjQUFjO1lBQ1ppQixRQUFRO2dCQUNOTCxNQUFNO2dCQUNOTSxTQUFTO2dCQUNUQyxNQUFNO2dCQUNOQyxZQUFZO2dCQUNaQyxTQUFTO1lBQ1g7WUFDQUMsU0FBUztRQUNYO0lBQ0Y7QUFDRixHQUNBO0lBQ0VDLFlBQVk7SUFDWkMsT0FBTztRQUNMQyxjQUFjLE9BQU9DO1lBQ25CLElBQUlBLEtBQUtqQixRQUFRLEVBQUU7Z0JBQ2pCLE1BQU1rQixPQUFPLE1BQU1sQyx1REFBYyxDQUFDO2dCQUNsQyxNQUFNb0MsaUJBQXlCLE1BQU1wQyxvREFBVyxDQUFDaUMsS0FBS2pCLFFBQVEsRUFBRWtCO2dCQUNoRUQsS0FBS2pCLFFBQVEsR0FBR29CO1lBQ2xCO1FBQ0Y7UUFDQUUsY0FBYyxPQUFPTDtZQUNuQixJQUFJQSxLQUFLTSxPQUFPLENBQUMsZUFBZU4sS0FBS2pCLFFBQVEsRUFBRTtnQkFDN0MsTUFBTWtCLE9BQU8sTUFBTWxDLHVEQUFjLENBQUM7Z0JBQ2xDLE1BQU1vQyxpQkFBeUIsTUFBTXBDLG9EQUFXLENBQUNpQyxLQUFLakIsUUFBUSxFQUFFa0I7Z0JBQ2hFRCxLQUFLakIsUUFBUSxHQUFHb0I7WUFDbEI7UUFDRjtJQUNGO0FBQ0Y7QUFHRixzQ0FBc0M7QUFDdENsQyxLQUFLc0MsU0FBUyxDQUFDQyxlQUFlLEdBQUcsZUFBZUMsaUJBQXlCO0lBQ3ZFLGlFQUFpRTtJQUNqRSxJQUFJLENBQUMsSUFBSSxDQUFDMUIsUUFBUSxFQUFFO1FBQ2xCLE9BQU87SUFDVDtJQUNBLE9BQU8sTUFBTWhCLHVEQUFjLENBQUMwQyxtQkFBbUIsSUFBSSxDQUFDMUIsUUFBUTtBQUM5RDtBQUVBLGlFQUFlZCxJQUFJQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZWdlbi8uL2xpYi9kYi9tb2RlbHMvVXNlci50cz82MTZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFUeXBlcywgTW9kZWwsIE9wdGlvbmFsIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IHsgc2VxdWVsaXplIH0gZnJvbSAnLi4vZGInO1xuXG4vLyBEZWZpbmUgVXNlciBhdHRyaWJ1dGVzXG5pbnRlcmZhY2UgVXNlckF0dHJpYnV0ZXMge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZD86IHN0cmluZztcbiAgZW1haWxWZXJpZmllZDogYm9vbGVhbjtcbiAgbmFtZT86IHN0cmluZztcbiAgaW1hZ2U/OiBzdHJpbmc7XG4gIGdvb2dsZUlkPzogc3RyaW5nO1xuICBzZXR0aW5nczoge1xuICAgIHNlbmRlcj86IHtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIGFkZHJlc3M6IHN0cmluZztcbiAgICAgIGNpdHk6IHN0cmluZztcbiAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICAgIGNvdW50cnk6IHN0cmluZztcbiAgICB9O1xuICAgIGxvZ29Vcmw/OiBzdHJpbmc7XG4gIH07XG4gIGNyZWF0ZWRBdD86IERhdGU7XG4gIHVwZGF0ZWRBdD86IERhdGU7XG59XG5cbi8vIERlZmluZSBvcHRpb25hbCBhdHRyaWJ1dGVzIGZvciBVc2VyIGNyZWF0aW9uXG5pbnRlcmZhY2UgVXNlckNyZWF0aW9uQXR0cmlidXRlcyBleHRlbmRzIE9wdGlvbmFsPFVzZXJBdHRyaWJ1dGVzLCAnaWQnIHwgJ2VtYWlsVmVyaWZpZWQnIHwgJ3NldHRpbmdzJz4ge31cblxuLy8gRGVmaW5lIFVzZXIgbW9kZWwgd2l0aCBpbnN0YW5jZSBtZXRob2RzXG5pbnRlcmZhY2UgVXNlckluc3RhbmNlIGV4dGVuZHMgTW9kZWw8VXNlckF0dHJpYnV0ZXMsIFVzZXJDcmVhdGlvbkF0dHJpYnV0ZXM+LCBVc2VyQXR0cmlidXRlcyB7XG4gIGNvbXBhcmVQYXNzd29yZChjYW5kaWRhdGVQYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcbn1cblxuY29uc3QgVXNlciA9IHNlcXVlbGl6ZS5kZWZpbmU8VXNlckluc3RhbmNlPihcbiAgJ1VzZXInLFxuICB7XG4gICAgaWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5VVUlELFxuICAgICAgZGVmYXVsdFZhbHVlOiBEYXRhVHlwZXMuVVVJRFY0LFxuICAgICAgcHJpbWFyeUtleTogdHJ1ZVxuICAgIH0sXG4gICAgZW1haWw6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgICAgdW5pcXVlOiB0cnVlLFxuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgaXNFbWFpbDogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGVtYWlsVmVyaWZpZWQ6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5CT09MRUFOLFxuICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgIGFsbG93TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgaW1hZ2U6IHtcbiAgICAgIHR5cGU6IERhdGFUeXBlcy5TVFJJTkcsXG4gICAgICBhbGxvd051bGw6IHRydWVcbiAgICB9LFxuICAgIGdvb2dsZUlkOiB7XG4gICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgYWxsb3dOdWxsOiB0cnVlLFxuICAgICAgdW5pcXVlOiB0cnVlXG4gICAgfSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgdHlwZTogRGF0YVR5cGVzLkpTT05CLFxuICAgICAgZGVmYXVsdFZhbHVlOiB7XG4gICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgIGFkZHJlc3M6ICcnLFxuICAgICAgICAgIGNpdHk6ICcnLFxuICAgICAgICAgIHBvc3RhbENvZGU6ICcnLFxuICAgICAgICAgIGNvdW50cnk6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ29Vcmw6ICcnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgICBob29rczoge1xuICAgICAgYmVmb3JlQ3JlYXRlOiBhc3luYyAodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmICh1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcbiAgICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZDogc3RyaW5nID0gYXdhaXQgYmNyeXB0Lmhhc2godXNlci5wYXNzd29yZCwgc2FsdCk7XG4gICAgICAgICAgdXNlci5wYXNzd29yZCA9IGhhc2hlZFBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYmVmb3JlVXBkYXRlOiBhc3luYyAodXNlcjogVXNlckluc3RhbmNlKSA9PiB7XG4gICAgICAgIGlmICh1c2VyLmNoYW5nZWQoJ3Bhc3N3b3JkJykgJiYgdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgxMCk7XG4gICAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyA9IGF3YWl0IGJjcnlwdC5oYXNoKHVzZXIucGFzc3dvcmQsIHNhbHQpO1xuICAgICAgICAgIHVzZXIucGFzc3dvcmQgPSBoYXNoZWRQYXNzd29yZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuKTtcblxuLy8gSW5zdGFuY2UgbWV0aG9kIHRvIGNvbXBhcmUgcGFzc3dvcmRcblVzZXIucHJvdG90eXBlLmNvbXBhcmVQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgLy8gSWYgdXNlciBoYXMgbm8gcGFzc3dvcmQgKGUuZy4sIEdvb2dsZSBhdXRoIHVzZXIpLCByZXR1cm4gZmFsc2VcbiAgaWYgKCF0aGlzLnBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgdGhpcy5wYXNzd29yZCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJuYW1lcyI6WyJEYXRhVHlwZXMiLCJiY3J5cHQiLCJzZXF1ZWxpemUiLCJVc2VyIiwiZGVmaW5lIiwiaWQiLCJ0eXBlIiwiVVVJRCIsImRlZmF1bHRWYWx1ZSIsIlVVSURWNCIsInByaW1hcnlLZXkiLCJlbWFpbCIsIlNUUklORyIsImFsbG93TnVsbCIsInVuaXF1ZSIsInZhbGlkYXRlIiwiaXNFbWFpbCIsInBhc3N3b3JkIiwiZW1haWxWZXJpZmllZCIsIkJPT0xFQU4iLCJuYW1lIiwiaW1hZ2UiLCJnb29nbGVJZCIsInNldHRpbmdzIiwiSlNPTkIiLCJzZW5kZXIiLCJhZGRyZXNzIiwiY2l0eSIsInBvc3RhbENvZGUiLCJjb3VudHJ5IiwibG9nb1VybCIsInRpbWVzdGFtcHMiLCJob29rcyIsImJlZm9yZUNyZWF0ZSIsInVzZXIiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsImJlZm9yZVVwZGF0ZSIsImNoYW5nZWQiLCJwcm90b3R5cGUiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/User.ts\n");

/***/ }),

/***/ "(api)/./lib/db/models/index.ts":
/*!********************************!*\
  !*** ./lib/db/models/index.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Invoice: () => (/* reexport safe */ _Invoice__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   User: () => (/* reexport safe */ _User__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _User__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./User */ \"(api)/./lib/db/models/User.ts\");\n/* harmony import */ var _Invoice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Invoice */ \"(api)/./lib/db/models/Invoice.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_User__WEBPACK_IMPORTED_MODULE_0__, _Invoice__WEBPACK_IMPORTED_MODULE_1__]);\n([_User__WEBPACK_IMPORTED_MODULE_0__, _Invoice__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIvbW9kZWxzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEI7QUFDTTtBQUs5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2VnZW4vLi9saWIvZGIvbW9kZWxzL2luZGV4LnRzPzY3NTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJztcbmltcG9ydCBJbnZvaWNlIGZyb20gJy4vSW52b2ljZSc7XG5cbmV4cG9ydCB7XG4gIFVzZXIsXG4gIEludm9pY2Vcbn07Il0sIm5hbWVzIjpbIlVzZXIiLCJJbnZvaWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db/models/index.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth_sequelize_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @auth/sequelize-adapter */ \"@auth/sequelize-adapter\");\n/* harmony import */ var _lib_db_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/db/db */ \"(api)/./lib/db/db.ts\");\n/* harmony import */ var _lib_db_models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/db/models */ \"(api)/./lib/db/models/index.ts\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth_sequelize_adapter__WEBPACK_IMPORTED_MODULE_2__, _lib_db_db__WEBPACK_IMPORTED_MODULE_3__, _lib_db_models__WEBPACK_IMPORTED_MODULE_4__]);\n([_auth_sequelize_adapter__WEBPACK_IMPORTED_MODULE_2__, _lib_db_db__WEBPACK_IMPORTED_MODULE_3__, _lib_db_models__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// Validate environment variables\nconst validateEnvVars = ()=>{\n    const requiredVars = [\n        \"GOOGLE_CLIENT_ID\",\n        \"GOOGLE_CLIENT_SECRET\",\n        \"JWT_SECRET\",\n        \"NEXTAUTH_SECRET\"\n    ];\n    const missingVars = requiredVars.filter((varName)=>!process.env[varName]);\n    if (missingVars.length > 0) {\n        console.error(`Missing required environment variables: ${missingVars.join(\", \")}`);\n        if (false) {}\n    }\n    // Warn about using default JWT secret in production\n    if (false) {}\n};\n// Track database initialization state\nlet dbInitialized = false;\nlet dbInitializationPromise = null;\n// Initialize database and adapter\nconst initializeAuth = async ()=>{\n    // Only initialize once\n    if (dbInitializationPromise) {\n        return dbInitializationPromise;\n    }\n    // Validate environment variables first\n    validateEnvVars();\n    // Initialize database with a promise we can track\n    dbInitializationPromise = (0,_lib_db_db__WEBPACK_IMPORTED_MODULE_3__.initDb)().then((success)=>{\n        dbInitialized = success;\n        if (!success) {\n            console.error(\"Failed to initialize database for NextAuth\");\n        } else {\n            console.log(\"Database initialized successfully for NextAuth\");\n        }\n        return success;\n    }).catch((error)=>{\n        console.error(\"Error initializing database for NextAuth:\", error);\n        return false;\n    });\n    return dbInitializationPromise;\n};\n// Create auth options function that ensures DB is initialized\nconst getAuthOptions = async ()=>{\n    // Wait for database initialization\n    const dbInitSuccess = await initializeAuth();\n    let adapter;\n    try {\n        // Only initialize adapter after DB is ready\n        console.log(\"Initializing SequelizeAdapter...\");\n        adapter = (0,_auth_sequelize_adapter__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_lib_db_db__WEBPACK_IMPORTED_MODULE_3__.sequelize);\n        console.log(\"SequelizeAdapter initialized successfully\");\n    } catch (adapterError) {\n        console.error(\"Error initializing SequelizeAdapter:\", adapterError);\n        // Continue without adapter if it fails to initialize\n        // This will fall back to JWT-only mode\n        console.warn(\"Falling back to JWT-only mode (no database adapter)\");\n    }\n    return {\n        providers: [\n            next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n                clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n                clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\"\n            })\n        ],\n        // Only include adapter if it was successfully initialized\n        ...adapter ? {\n            adapter\n        } : {},\n        session: {\n            strategy: \"jwt\",\n            maxAge: 30 * 24 * 60 * 60\n        },\n        pages: {\n            signIn: \"/login\",\n            signOut: \"/login\",\n            error: \"/login\"\n        },\n        callbacks: {\n            async signIn ({ user, account, profile }) {\n                try {\n                    // Only allow Google sign-in\n                    if (account?.provider !== \"google\") {\n                        return false;\n                    }\n                    // Check if database is initialized\n                    if (!dbInitialized) {\n                        console.error(\"Database not initialized during sign-in attempt\");\n                        return false;\n                    }\n                    // Check if user exists in our database\n                    if (user.email) {\n                        try {\n                            const existingUser = await _lib_db_models__WEBPACK_IMPORTED_MODULE_4__.User.findOne({\n                                where: {\n                                    email: user.email\n                                }\n                            });\n                            if (existingUser) {\n                                // Update user with Google info if not already set\n                                if (!existingUser.googleId && profile) {\n                                    await existingUser.update({\n                                        googleId: profile.sub,\n                                        name: user.name || undefined,\n                                        image: user.image || undefined,\n                                        emailVerified: true\n                                    });\n                                }\n                            } else {\n                                // Create new user\n                                await _lib_db_models__WEBPACK_IMPORTED_MODULE_4__.User.create({\n                                    email: user.email,\n                                    name: user.name || undefined,\n                                    image: user.image || undefined,\n                                    googleId: profile ? profile.sub : undefined,\n                                    emailVerified: true\n                                });\n                            }\n                        } catch (dbError) {\n                            console.error(\"Database error during sign-in:\", dbError);\n                            return false;\n                        }\n                    }\n                    return true;\n                } catch (error) {\n                    console.error(\"Error in signIn callback:\", error);\n                    return false;\n                }\n            },\n            async jwt ({ token, user }) {\n                try {\n                    // Add custom claims to the JWT token\n                    if (user) {\n                        token.userId = user.id;\n                        // Get JWT secret with validation\n                        const jwtSecret = process.env.JWT_SECRET;\n                        if (!jwtSecret) {\n                            console.error(\"JWT_SECRET is not defined\");\n                            throw new Error(\"JWT_SECRET is not defined\");\n                        }\n                        // Create a JWT token compatible with our existing auth system\n                        const customToken = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n                            id: user.id\n                        }, jwtSecret, {\n                            expiresIn: \"7d\"\n                        });\n                        token.customToken = customToken;\n                    }\n                    return token;\n                } catch (error) {\n                    console.error(\"Error in jwt callback:\", error);\n                    return token;\n                }\n            },\n            async session ({ session, token }) {\n                try {\n                    console.log(\"Session callback called with token:\", {\n                        hasToken: !!token,\n                        tokenKeys: token ? Object.keys(token) : [],\n                        hasUserId: !!token?.userId\n                    });\n                    // Create a safe copy of the session to avoid mutation issues\n                    const safeSession = {\n                        ...session\n                    };\n                    // Ensure user object exists\n                    if (!safeSession.user) {\n                        console.warn(\"Session callback: session.user is undefined, creating empty user object\");\n                        safeSession.user = {\n                            id: \"\",\n                            name: null,\n                            email: null,\n                            image: null\n                        };\n                    }\n                    // Add user ID to the session if available in token\n                    if (token?.userId) {\n                        safeSession.user.id = token.userId;\n                        // Add custom token to the session if available\n                        if (token.customToken) {\n                            safeSession.customToken = token.customToken;\n                        }\n                    } else {\n                        // Log warning if token is missing expected properties\n                        console.warn(\"Session callback: token is missing userId\", {\n                            hasToken: !!token,\n                            tokenKeys: token ? Object.keys(token) : []\n                        });\n                        // Ensure user has an ID even if token doesn't provide one\n                        if (!safeSession.user.id) {\n                            safeSession.user.id = \"\";\n                        }\n                    }\n                    // Ensure expires field exists\n                    if (!safeSession.expires) {\n                        console.warn(\"Session callback: session.expires is undefined, setting default expiry\");\n                        safeSession.expires = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(); // 30 days\n                    }\n                    console.log(\"Session callback returning session with user ID:\", safeSession.user.id);\n                    return safeSession;\n                } catch (error) {\n                    console.error(\"Error in session callback:\", error);\n                    // Return a basic session object to prevent complete failure\n                    // This allows the application to continue functioning with limited capabilities\n                    return {\n                        user: {\n                            id: \"\",\n                            name: null,\n                            email: null,\n                            image: null\n                        },\n                        expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // 30 days\n                    };\n                }\n            }\n        },\n        debug: \"development\" === \"development\"\n    };\n};\n// Export a dynamic API handler that ensures DB is initialized\nasync function auth(req, res) {\n    // Log request details for all environments to help with debugging\n    console.log(`NextAuth request: ${req.method} ${req.url}`);\n    try {\n        // Initialize database first to ensure it's ready\n        console.log(\"Initializing auth database connection...\");\n        const dbInitResult = await initializeAuth();\n        console.log(\"Database initialization result:\", dbInitResult);\n        // Get auth options (this will initialize the adapter if database is ready)\n        console.log(\"Getting NextAuth options...\");\n        const authOptions = await getAuthOptions();\n        // Add more detailed logging\n        console.log(\"NextAuth handler processing request:\", {\n            path: req.url,\n            method: req.method,\n            hasAdapter: !!authOptions.adapter,\n            providers: authOptions.providers.map((p)=>p.id).join(\", \"),\n            sessionStrategy: authOptions.session?.strategy || \"default\"\n        });\n        // Special handling for session endpoint to ensure it never fails with 500\n        if (req.url.includes(\"/api/auth/session\")) {\n            console.log(\"Processing session request - applying enhanced error handling\");\n            try {\n                return await next_auth__WEBPACK_IMPORTED_MODULE_0___default()(req, res, authOptions);\n            } catch (sessionError) {\n                console.error(\"Error in session endpoint:\", sessionError);\n                // For session endpoint, return an empty but valid session instead of error\n                // This prevents client-side auth failures and allows graceful degradation\n                return res.status(200).json({\n                    user: null,\n                    expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString()\n                });\n            }\n        }\n        // For other auth endpoints, use standard NextAuth with error handling\n        return await next_auth__WEBPACK_IMPORTED_MODULE_0___default()(req, res, authOptions);\n    } catch (error) {\n        console.error(\"Critical error in NextAuth handler:\", error);\n        // Log detailed error information\n        if (error instanceof Error) {\n            console.error(`Error name: ${error.name}`);\n            console.error(`Error message: ${error.message}`);\n            console.error(`Error stack: ${error.stack}`);\n        }\n        // Check if response has already been sent\n        if (res.headersSent) {\n            console.warn(\"Headers already sent, cannot send error response\");\n            return;\n        }\n        // Return a proper error response instead of throwing\n        res.status(500).json({\n            error: \"Internal Server Error\",\n            message: \"Authentication service is temporarily unavailable\",\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFHRTtBQUNEO0FBQ0E7QUFDVDtBQUNmO0FBdUIvQixpQ0FBaUM7QUFDakMsTUFBTU8sa0JBQWtCO0lBQ3RCLE1BQU1DLGVBQWU7UUFDbkI7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELE1BQU1DLGNBQWNELGFBQWFFLE1BQU0sQ0FBQ0MsQ0FBQUEsVUFBVyxDQUFDQyxRQUFRQyxHQUFHLENBQUNGLFFBQVE7SUFFeEUsSUFBSUYsWUFBWUssTUFBTSxHQUFHLEdBQUc7UUFDMUJDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLHdDQUF3QyxFQUFFUCxZQUFZUSxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2pGLElBQUlMLEtBQXlCLEVBQWMsRUFFMUM7SUFDSDtJQUVBLG9EQUFvRDtJQUNwRCxJQUFJQSxLQUMyQixFQUFpRCxFQUUvRTtBQUNIO0FBRUEsc0NBQXNDO0FBQ3RDLElBQUlRLGdCQUFnQjtBQUNwQixJQUFJQywwQkFBbUQ7QUFFdkQsa0NBQWtDO0FBQ2xDLE1BQU1DLGlCQUFpQjtJQUNyQix1QkFBdUI7SUFDdkIsSUFBSUQseUJBQXlCO1FBQzNCLE9BQU9BO0lBQ1Q7SUFFQSx1Q0FBdUM7SUFDdkNkO0lBRUEsa0RBQWtEO0lBQ2xEYywwQkFBMEJqQixrREFBTUEsR0FBR21CLElBQUksQ0FBQ0MsQ0FBQUE7UUFDdENKLGdCQUFnQkk7UUFDaEIsSUFBSSxDQUFDQSxTQUFTO1lBQ1pULFFBQVFDLEtBQUssQ0FBQztRQUNoQixPQUFPO1lBQ0xELFFBQVFVLEdBQUcsQ0FBQztRQUNkO1FBQ0EsT0FBT0Q7SUFDVCxHQUFHRSxLQUFLLENBQUNWLENBQUFBO1FBQ1BELFFBQVFDLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzNELE9BQU87SUFDVDtJQUVBLE9BQU9LO0FBQ1Q7QUFFQSw4REFBOEQ7QUFDOUQsTUFBTU0saUJBQWlCO0lBQ3JCLG1DQUFt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QU11QyxJQUFJLENBQUMsQ0FBQztZQUN6Q3hDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLGVBQWUsRUFBRUEsTUFBTStFLE9BQU8sQ0FBQyxDQUFDO1lBQy9DaEYsUUFBUUMsS0FBSyxDQUFDLENBQUMsYUFBYSxFQUFFQSxNQUFNZ0YsS0FBSyxDQUFDLENBQUM7UUFDN0M7UUFFQSwwQ0FBMEM7UUFDMUMsSUFBSWYsSUFBSWdCLFdBQVcsRUFBRTtZQUNuQmxGLFFBQVFnQixJQUFJLENBQUM7WUFDYjtRQUNGO1FBRUEscURBQXFEO1FBQ3JEa0QsSUFBSVksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQjlFLE9BQU87WUFDUCtFLFNBQVM7WUFDVEcsV0FBVyxJQUFJdkIsT0FBT0UsV0FBVztRQUNuQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlZ2VuLy4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cz8yZThiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCwgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IHsgSldUIH0gZnJvbSAnbmV4dC1hdXRoL2p3dCc7XG5pbXBvcnQgeyBTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5pbXBvcnQgU2VxdWVsaXplQWRhcHRlciBmcm9tICdAYXV0aC9zZXF1ZWxpemUtYWRhcHRlcic7XG5pbXBvcnQgeyBzZXF1ZWxpemUsIGluaXREYiB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYi9kYic7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiL21vZGVscyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbi8vIEV4dGVuZCB0aGUgU2Vzc2lvbiB0eXBlIHRvIGluY2x1ZGUgb3VyIGN1c3RvbSBwcm9wZXJ0aWVzXG5kZWNsYXJlIG1vZHVsZSAnbmV4dC1hdXRoJyB7XG4gIGludGVyZmFjZSBTZXNzaW9uIHtcbiAgICB1c2VyOiB7XG4gICAgICBpZDogc3RyaW5nO1xuICAgICAgbmFtZT86IHN0cmluZyB8IG51bGw7XG4gICAgICBlbWFpbD86IHN0cmluZyB8IG51bGw7XG4gICAgICBpbWFnZT86IHN0cmluZyB8IG51bGw7XG4gICAgfTtcbiAgICBjdXN0b21Ub2tlbj86IHN0cmluZztcbiAgfVxufVxuXG4vLyBFeHRlbmQgdGhlIEpXVCB0eXBlIHRvIGluY2x1ZGUgb3VyIGN1c3RvbSBwcm9wZXJ0aWVzXG5kZWNsYXJlIG1vZHVsZSAnbmV4dC1hdXRoL2p3dCcge1xuICBpbnRlcmZhY2UgSldUIHtcbiAgICB1c2VySWQ/OiBzdHJpbmc7XG4gICAgY3VzdG9tVG9rZW4/OiBzdHJpbmc7XG4gIH1cbn1cblxuLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25zdCB2YWxpZGF0ZUVudlZhcnMgPSAoKSA9PiB7XG4gIGNvbnN0IHJlcXVpcmVkVmFycyA9IFtcbiAgICAnR09PR0xFX0NMSUVOVF9JRCcsXG4gICAgJ0dPT0dMRV9DTElFTlRfU0VDUkVUJyxcbiAgICAnSldUX1NFQ1JFVCcsXG4gICAgJ05FWFRBVVRIX1NFQ1JFVCdcbiAgXTtcbiAgXG4gIGNvbnN0IG1pc3NpbmdWYXJzID0gcmVxdWlyZWRWYXJzLmZpbHRlcih2YXJOYW1lID0+ICFwcm9jZXNzLmVudlt2YXJOYW1lXSk7XG4gIFxuICBpZiAobWlzc2luZ1ZhcnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnNvbGUuZXJyb3IoYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzOiAke21pc3NpbmdWYXJzLmpvaW4oJywgJyl9YCk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6ICR7bWlzc2luZ1ZhcnMuam9pbignLCAnKX1gKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFdhcm4gYWJvdXQgdXNpbmcgZGVmYXVsdCBKV1Qgc2VjcmV0IGluIHByb2R1Y3Rpb25cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgXG4gICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUID09PSAneW91cl9qd3Rfc2VjcmV0X2tleV9jaGFuZ2VfdGhpc19pbl9wcm9kdWN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1dBUk5JTkc6IFVzaW5nIGRlZmF1bHQgSldUX1NFQ1JFVCBpbiBwcm9kdWN0aW9uIGVudmlyb25tZW50IScpO1xuICB9XG59O1xuXG4vLyBUcmFjayBkYXRhYmFzZSBpbml0aWFsaXphdGlvbiBzdGF0ZVxubGV0IGRiSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbmxldCBkYkluaXRpYWxpemF0aW9uUHJvbWlzZTogUHJvbWlzZTxib29sZWFuPiB8IG51bGwgPSBudWxsO1xuXG4vLyBJbml0aWFsaXplIGRhdGFiYXNlIGFuZCBhZGFwdGVyXG5jb25zdCBpbml0aWFsaXplQXV0aCA9IGFzeW5jICgpID0+IHtcbiAgLy8gT25seSBpbml0aWFsaXplIG9uY2VcbiAgaWYgKGRiSW5pdGlhbGl6YXRpb25Qcm9taXNlKSB7XG4gICAgcmV0dXJuIGRiSW5pdGlhbGl6YXRpb25Qcm9taXNlO1xuICB9XG5cbiAgLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZpcnN0XG4gIHZhbGlkYXRlRW52VmFycygpO1xuXG4gIC8vIEluaXRpYWxpemUgZGF0YWJhc2Ugd2l0aCBhIHByb21pc2Ugd2UgY2FuIHRyYWNrXG4gIGRiSW5pdGlhbGl6YXRpb25Qcm9taXNlID0gaW5pdERiKCkudGhlbihzdWNjZXNzID0+IHtcbiAgICBkYkluaXRpYWxpemVkID0gc3VjY2VzcztcbiAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIGZvciBOZXh0QXV0aCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5IGZvciBOZXh0QXV0aCcpO1xuICAgIH1cbiAgICByZXR1cm4gc3VjY2VzcztcbiAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZSBmb3IgTmV4dEF1dGg6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRiSW5pdGlhbGl6YXRpb25Qcm9taXNlO1xufTtcblxuLy8gQ3JlYXRlIGF1dGggb3B0aW9ucyBmdW5jdGlvbiB0aGF0IGVuc3VyZXMgREIgaXMgaW5pdGlhbGl6ZWRcbmNvbnN0IGdldEF1dGhPcHRpb25zID0gYXN5bmMgKCk6IFByb21pc2U8TmV4dEF1dGhPcHRpb25zPiA9PiB7XG4gIC8vIFdhaXQgZm9yIGRhdGFiYXNlIGluaXRpYWxpemF0aW9uXG4gIGNvbnN0IGRiSW5pdFN1Y2Nlc3MgPSBhd2FpdCBpbml0aWFsaXplQXV0aCgpO1xuICBcbiAgbGV0IGFkYXB0ZXI7XG4gIHRyeSB7XG4gICAgLy8gT25seSBpbml0aWFsaXplIGFkYXB0ZXIgYWZ0ZXIgREIgaXMgcmVhZHlcbiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIFNlcXVlbGl6ZUFkYXB0ZXIuLi4nKTtcbiAgICBhZGFwdGVyID0gU2VxdWVsaXplQWRhcHRlcihzZXF1ZWxpemUpO1xuICAgIGNvbnNvbGUubG9nKCdTZXF1ZWxpemVBZGFwdGVyIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICB9IGNhdGNoIChhZGFwdGVyRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgU2VxdWVsaXplQWRhcHRlcjonLCBhZGFwdGVyRXJyb3IpO1xuICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgYWRhcHRlciBpZiBpdCBmYWlscyB0byBpbml0aWFsaXplXG4gICAgLy8gVGhpcyB3aWxsIGZhbGwgYmFjayB0byBKV1Qtb25seSBtb2RlXG4gICAgY29uc29sZS53YXJuKCdGYWxsaW5nIGJhY2sgdG8gSldULW9ubHkgbW9kZSAobm8gZGF0YWJhc2UgYWRhcHRlciknKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQgfHwgJycsXG4gICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgICB9KSxcbiAgICBdLFxuICAgIC8vIE9ubHkgaW5jbHVkZSBhZGFwdGVyIGlmIGl0IHdhcyBzdWNjZXNzZnVsbHkgaW5pdGlhbGl6ZWRcbiAgICAuLi4oYWRhcHRlciA/IHsgYWRhcHRlciB9IDoge30pLFxuICAgIHNlc3Npb246IHtcbiAgICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgICB9LFxuICAgIHBhZ2VzOiB7XG4gICAgICBzaWduSW46ICcvbG9naW4nLFxuICAgICAgc2lnbk91dDogJy9sb2dpbicsXG4gICAgICBlcnJvcjogJy9sb2dpbicsXG4gICAgfSxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIE9ubHkgYWxsb3cgR29vZ2xlIHNpZ24taW5cbiAgICAgICAgICBpZiAoYWNjb3VudD8ucHJvdmlkZXIgIT09ICdnb29nbGUnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIGRhdGFiYXNlIGlzIGluaXRpYWxpemVkXG4gICAgICAgICAgaWYgKCFkYkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQgZHVyaW5nIHNpZ24taW4gYXR0ZW1wdCcpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0cyBpbiBvdXIgZGF0YWJhc2VcbiAgICAgICAgICBpZiAodXNlci5lbWFpbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgd2hlcmU6IHsgZW1haWw6IHVzZXIuZW1haWwgfSB9KTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdXNlciB3aXRoIEdvb2dsZSBpbmZvIGlmIG5vdCBhbHJlYWR5IHNldFxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdVc2VyLmdvb2dsZUlkICYmIHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGV4aXN0aW5nVXNlci51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICBnb29nbGVJZDogcHJvZmlsZS5zdWIgYXMgc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyB1c2VyXG4gICAgICAgICAgICAgICAgYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgZ29vZ2xlSWQ6IHByb2ZpbGUgPyAocHJvZmlsZS5zdWIgYXMgc3RyaW5nKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3IgZHVyaW5nIHNpZ24taW46JywgZGJFcnJvcik7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2lnbkluIGNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQWRkIGN1c3RvbSBjbGFpbXMgdG8gdGhlIEpXVCB0b2tlblxuICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICB0b2tlbi51c2VySWQgPSB1c2VyLmlkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHZXQgSldUIHNlY3JldCB3aXRoIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGp3dFNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQ7XG4gICAgICAgICAgICBpZiAoIWp3dFNlY3JldCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKV1RfU0VDUkVUIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBpcyBub3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBKV1QgdG9rZW4gY29tcGF0aWJsZSB3aXRoIG91ciBleGlzdGluZyBhdXRoIHN5c3RlbVxuICAgICAgICAgICAgY29uc3QgY3VzdG9tVG9rZW4gPSBqd3Quc2lnbihcbiAgICAgICAgICAgICAgeyBpZDogdXNlci5pZCB9LFxuICAgICAgICAgICAgICBqd3RTZWNyZXQsXG4gICAgICAgICAgICAgIHsgZXhwaXJlc0luOiAnN2QnIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRva2VuLmN1c3RvbVRva2VuID0gY3VzdG9tVG9rZW47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBqd3QgY2FsbGJhY2s6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gY2FsbGJhY2sgY2FsbGVkIHdpdGggdG9rZW46JywgeyBcbiAgICAgICAgICAgIGhhc1Rva2VuOiAhIXRva2VuLFxuICAgICAgICAgICAgdG9rZW5LZXlzOiB0b2tlbiA/IE9iamVjdC5rZXlzKHRva2VuKSA6IFtdLFxuICAgICAgICAgICAgaGFzVXNlcklkOiAhIXRva2VuPy51c2VySWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgYSBzYWZlIGNvcHkgb2YgdGhlIHNlc3Npb24gdG8gYXZvaWQgbXV0YXRpb24gaXNzdWVzXG4gICAgICAgICAgY29uc3Qgc2FmZVNlc3Npb24gPSB7IC4uLnNlc3Npb24gfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFbnN1cmUgdXNlciBvYmplY3QgZXhpc3RzXG4gICAgICAgICAgaWYgKCFzYWZlU2Vzc2lvbi51c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1Nlc3Npb24gY2FsbGJhY2s6IHNlc3Npb24udXNlciBpcyB1bmRlZmluZWQsIGNyZWF0aW5nIGVtcHR5IHVzZXIgb2JqZWN0Jyk7XG4gICAgICAgICAgICBzYWZlU2Vzc2lvbi51c2VyID0geyBpZDogJycsIG5hbWU6IG51bGwsIGVtYWlsOiBudWxsLCBpbWFnZTogbnVsbCB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgdXNlciBJRCB0byB0aGUgc2Vzc2lvbiBpZiBhdmFpbGFibGUgaW4gdG9rZW5cbiAgICAgICAgICBpZiAodG9rZW4/LnVzZXJJZCkge1xuICAgICAgICAgICAgc2FmZVNlc3Npb24udXNlci5pZCA9IHRva2VuLnVzZXJJZCBhcyBzdHJpbmc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCBjdXN0b20gdG9rZW4gdG8gdGhlIHNlc3Npb24gaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBpZiAodG9rZW4uY3VzdG9tVG9rZW4pIHtcbiAgICAgICAgICAgICAgc2FmZVNlc3Npb24uY3VzdG9tVG9rZW4gPSB0b2tlbi5jdXN0b21Ub2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTG9nIHdhcm5pbmcgaWYgdG9rZW4gaXMgbWlzc2luZyBleHBlY3RlZCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1Nlc3Npb24gY2FsbGJhY2s6IHRva2VuIGlzIG1pc3NpbmcgdXNlcklkJywgeyBcbiAgICAgICAgICAgICAgaGFzVG9rZW46ICEhdG9rZW4sXG4gICAgICAgICAgICAgIHRva2VuS2V5czogdG9rZW4gPyBPYmplY3Qua2V5cyh0b2tlbikgOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVuc3VyZSB1c2VyIGhhcyBhbiBJRCBldmVuIGlmIHRva2VuIGRvZXNuJ3QgcHJvdmlkZSBvbmVcbiAgICAgICAgICAgIGlmICghc2FmZVNlc3Npb24udXNlci5pZCkge1xuICAgICAgICAgICAgICBzYWZlU2Vzc2lvbi51c2VyLmlkID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVuc3VyZSBleHBpcmVzIGZpZWxkIGV4aXN0c1xuICAgICAgICAgIGlmICghc2FmZVNlc3Npb24uZXhwaXJlcykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdTZXNzaW9uIGNhbGxiYWNrOiBzZXNzaW9uLmV4cGlyZXMgaXMgdW5kZWZpbmVkLCBzZXR0aW5nIGRlZmF1bHQgZXhwaXJ5Jyk7XG4gICAgICAgICAgICBzYWZlU2Vzc2lvbi5leHBpcmVzID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKTsgLy8gMzAgZGF5c1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBjYWxsYmFjayByZXR1cm5pbmcgc2Vzc2lvbiB3aXRoIHVzZXIgSUQ6Jywgc2FmZVNlc3Npb24udXNlci5pZCk7XG4gICAgICAgICAgcmV0dXJuIHNhZmVTZXNzaW9uO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNlc3Npb24gY2FsbGJhY2s6JywgZXJyb3IpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJldHVybiBhIGJhc2ljIHNlc3Npb24gb2JqZWN0IHRvIHByZXZlbnQgY29tcGxldGUgZmFpbHVyZVxuICAgICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBhcHBsaWNhdGlvbiB0byBjb250aW51ZSBmdW5jdGlvbmluZyB3aXRoIGxpbWl0ZWQgY2FwYWJpbGl0aWVzXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXI6IHsgaWQ6ICcnLCBuYW1lOiBudWxsLCBlbWFpbDogbnVsbCwgaW1hZ2U6IG51bGwgfSxcbiAgICAgICAgICAgIGV4cGlyZXM6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkgLy8gMzAgZGF5c1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcbiAgICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcsXG4gIH07XG59O1xuXG4vLyBFeHBvcnQgYSBkeW5hbWljIEFQSSBoYW5kbGVyIHRoYXQgZW5zdXJlcyBEQiBpcyBpbml0aWFsaXplZFxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gYXV0aChyZXE6IGFueSwgcmVzOiBhbnkpIHtcbiAgLy8gTG9nIHJlcXVlc3QgZGV0YWlscyBmb3IgYWxsIGVudmlyb25tZW50cyB0byBoZWxwIHdpdGggZGVidWdnaW5nXG4gIGNvbnNvbGUubG9nKGBOZXh0QXV0aCByZXF1ZXN0OiAke3JlcS5tZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBmaXJzdCB0byBlbnN1cmUgaXQncyByZWFkeVxuICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgYXV0aCBkYXRhYmFzZSBjb25uZWN0aW9uLi4uJyk7XG4gICAgY29uc3QgZGJJbml0UmVzdWx0ID0gYXdhaXQgaW5pdGlhbGl6ZUF1dGgoKTtcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgaW5pdGlhbGl6YXRpb24gcmVzdWx0OicsIGRiSW5pdFJlc3VsdCk7XG4gICAgXG4gICAgLy8gR2V0IGF1dGggb3B0aW9ucyAodGhpcyB3aWxsIGluaXRpYWxpemUgdGhlIGFkYXB0ZXIgaWYgZGF0YWJhc2UgaXMgcmVhZHkpXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgTmV4dEF1dGggb3B0aW9ucy4uLicpO1xuICAgIGNvbnN0IGF1dGhPcHRpb25zID0gYXdhaXQgZ2V0QXV0aE9wdGlvbnMoKTtcbiAgICBcbiAgICAvLyBBZGQgbW9yZSBkZXRhaWxlZCBsb2dnaW5nXG4gICAgY29uc29sZS5sb2coJ05leHRBdXRoIGhhbmRsZXIgcHJvY2Vzc2luZyByZXF1ZXN0OicsIHtcbiAgICAgIHBhdGg6IHJlcS51cmwsXG4gICAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgICBoYXNBZGFwdGVyOiAhIWF1dGhPcHRpb25zLmFkYXB0ZXIsXG4gICAgICBwcm92aWRlcnM6IGF1dGhPcHRpb25zLnByb3ZpZGVycy5tYXAocCA9PiBwLmlkKS5qb2luKCcsICcpLFxuICAgICAgc2Vzc2lvblN0cmF0ZWd5OiBhdXRoT3B0aW9ucy5zZXNzaW9uPy5zdHJhdGVneSB8fCAnZGVmYXVsdCdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBzZXNzaW9uIGVuZHBvaW50IHRvIGVuc3VyZSBpdCBuZXZlciBmYWlscyB3aXRoIDUwMFxuICAgIGlmIChyZXEudXJsLmluY2x1ZGVzKCcvYXBpL2F1dGgvc2Vzc2lvbicpKSB7XG4gICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBzZXNzaW9uIHJlcXVlc3QgLSBhcHBseWluZyBlbmhhbmNlZCBlcnJvciBoYW5kbGluZycpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IE5leHRBdXRoKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG4gICAgICB9IGNhdGNoIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2Vzc2lvbiBlbmRwb2ludDonLCBzZXNzaW9uRXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIHNlc3Npb24gZW5kcG9pbnQsIHJldHVybiBhbiBlbXB0eSBidXQgdmFsaWQgc2Vzc2lvbiBpbnN0ZWFkIG9mIGVycm9yXG4gICAgICAgIC8vIFRoaXMgcHJldmVudHMgY2xpZW50LXNpZGUgYXV0aCBmYWlsdXJlcyBhbmQgYWxsb3dzIGdyYWNlZnVsIGRlZ3JhZGF0aW9uXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBGb3Igb3RoZXIgYXV0aCBlbmRwb2ludHMsIHVzZSBzdGFuZGFyZCBOZXh0QXV0aCB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgcmV0dXJuIGF3YWl0IE5leHRBdXRoKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ3JpdGljYWwgZXJyb3IgaW4gTmV4dEF1dGggaGFuZGxlcjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gTG9nIGRldGFpbGVkIGVycm9yIGluZm9ybWF0aW9uXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG5hbWU6ICR7ZXJyb3IubmFtZX1gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG1lc3NhZ2U6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHN0YWNrOiAke2Vycm9yLnN0YWNrfWApO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBoYXMgYWxyZWFkeSBiZWVuIHNlbnRcbiAgICBpZiAocmVzLmhlYWRlcnNTZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0hlYWRlcnMgYWxyZWFkeSBzZW50LCBjYW5ub3Qgc2VuZCBlcnJvciByZXNwb25zZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gYSBwcm9wZXIgZXJyb3IgcmVzcG9uc2UgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiBzZXJ2aWNlIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJHb29nbGVQcm92aWRlciIsIlNlcXVlbGl6ZUFkYXB0ZXIiLCJzZXF1ZWxpemUiLCJpbml0RGIiLCJVc2VyIiwiand0IiwidmFsaWRhdGVFbnZWYXJzIiwicmVxdWlyZWRWYXJzIiwibWlzc2luZ1ZhcnMiLCJmaWx0ZXIiLCJ2YXJOYW1lIiwicHJvY2VzcyIsImVudiIsImxlbmd0aCIsImNvbnNvbGUiLCJlcnJvciIsImpvaW4iLCJFcnJvciIsIkpXVF9TRUNSRVQiLCJkYkluaXRpYWxpemVkIiwiZGJJbml0aWFsaXphdGlvblByb21pc2UiLCJpbml0aWFsaXplQXV0aCIsInRoZW4iLCJzdWNjZXNzIiwibG9nIiwiY2F0Y2giLCJnZXRBdXRoT3B0aW9ucyIsImRiSW5pdFN1Y2Nlc3MiLCJhZGFwdGVyIiwiYWRhcHRlckVycm9yIiwid2FybiIsInByb3ZpZGVycyIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwicGFnZXMiLCJzaWduSW4iLCJzaWduT3V0IiwiY2FsbGJhY2tzIiwidXNlciIsImFjY291bnQiLCJwcm9maWxlIiwicHJvdmlkZXIiLCJlbWFpbCIsImV4aXN0aW5nVXNlciIsImZpbmRPbmUiLCJ3aGVyZSIsImdvb2dsZUlkIiwidXBkYXRlIiwic3ViIiwibmFtZSIsInVuZGVmaW5lZCIsImltYWdlIiwiZW1haWxWZXJpZmllZCIsImNyZWF0ZSIsImRiRXJyb3IiLCJ0b2tlbiIsInVzZXJJZCIsImlkIiwiand0U2VjcmV0IiwiY3VzdG9tVG9rZW4iLCJzaWduIiwiZXhwaXJlc0luIiwiaGFzVG9rZW4iLCJ0b2tlbktleXMiLCJPYmplY3QiLCJrZXlzIiwiaGFzVXNlcklkIiwic2FmZVNlc3Npb24iLCJleHBpcmVzIiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwiZGVidWciLCJhdXRoIiwicmVxIiwicmVzIiwibWV0aG9kIiwidXJsIiwiZGJJbml0UmVzdWx0IiwiYXV0aE9wdGlvbnMiLCJwYXRoIiwiaGFzQWRhcHRlciIsIm1hcCIsInAiLCJzZXNzaW9uU3RyYXRlZ3kiLCJpbmNsdWRlcyIsInNlc3Npb25FcnJvciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwic3RhY2siLCJoZWFkZXJzU2VudCIsInRpbWVzdGFtcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2F%5B...nextauth%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2F%5B...nextauth%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();